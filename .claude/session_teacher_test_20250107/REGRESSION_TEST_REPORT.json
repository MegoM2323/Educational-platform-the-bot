{
  "timestamp": "2026-01-07T02:03:55.959428",
  "test_run": "teacher_dashboard_regression",
  "environment": "test",
  "summary": {
    "total": 243,
    "passed": 203,
    "failed": 40,
    "errors": 0,
    "pass_rate": 83.54,
    "duration_seconds": 59.84
  },
  "by_wave": {
    "Wave_1_Authentication_Permissions_CRUD": {
      "files": [
        "test_authentication.py",
        "test_permissions.py",
        "test_crud_basics.py"
      ],
      "total": 54,
      "passed": 54,
      "failed": 0,
      "status": "PASS",
      "description": "Authentication, permissions, and CRUD operations"
    },
    "Wave_2_Materials_StudentDistribution_Progress": {
      "files": [
        "test_materials_management.py",
        "test_student_distribution.py",
        "test_progress_tracking.py"
      ],
      "total": 95,
      "passed": 65,
      "failed": 30,
      "status": "PARTIAL",
      "description": "Materials management, student distribution, progress tracking"
    },
    "Wave_3_AssignmentsGrading_Submissions_Review": {
      "files": [
        "test_assignments_grading.py",
        "test_submissions_feedback.py",
        "test_review_workflow.py"
      ],
      "total": 90,
      "passed": 90,
      "failed": 0,
      "status": "PASS",
      "description": "Assignments, grading, submissions, feedback, review workflow"
    }
  },
  "by_file": {
    "test_authentication.py": {
      "total": 6,
      "passed": 6,
      "failed": 0,
      "pass_rate": 100.0,
      "status": "PASS"
    },
    "test_permissions.py": {
      "total": 16,
      "passed": 16,
      "failed": 0,
      "pass_rate": 100.0,
      "status": "PASS"
    },
    "test_crud_basics.py": {
      "total": 32,
      "passed": 32,
      "failed": 0,
      "pass_rate": 100.0,
      "status": "PASS"
    },
    "test_materials_management.py": {
      "total": 40,
      "passed": 38,
      "failed": 2,
      "pass_rate": 95.0,
      "status": "PASS"
    },
    "test_student_distribution.py": {
      "total": 25,
      "passed": 20,
      "failed": 5,
      "pass_rate": 80.0,
      "status": "FAIL"
    },
    "test_progress_tracking.py": {
      "total": 30,
      "passed": 7,
      "failed": 23,
      "pass_rate": 23.33,
      "status": "FAIL"
    },
    "test_assignments_grading.py": {
      "total": 27,
      "passed": 27,
      "failed": 0,
      "pass_rate": 100.0,
      "status": "PASS"
    },
    "test_submissions_feedback.py": {
      "total": 21,
      "passed": 21,
      "failed": 0,
      "pass_rate": 100.0,
      "status": "PASS"
    },
    "test_review_workflow.py": {
      "total": 42,
      "passed": 42,
      "failed": 0,
      "pass_rate": 100.0,
      "status": "PASS"
    }
  },
  "execution_time": {
    "total_seconds": 59.84,
    "per_test_avg": 0.246,
    "slowest": 2.90,
    "fastest": 0.05
  },
  "slowest_tests": [
    {
      "name": "test_bulk_assign_large_group",
      "file": "test_student_distribution.py",
      "duration_s": 2.90,
      "reason": "Large group assignment to 100+ students"
    },
    {
      "name": "test_pagination_of_student_list",
      "file": "test_student_distribution.py",
      "duration_s": 2.29,
      "reason": "Paginated query with large dataset"
    },
    {
      "name": "test_percentile_ranking",
      "file": "test_progress_tracking.py",
      "duration_s": 1.56,
      "reason": "Percentile calculation across all students"
    }
  ],
  "regressions": [],
  "failures": {
    "test_progress_tracking": {
      "count": 23,
      "percentage": 76.7,
      "root_cause": "TypeError: MaterialProgress() got unexpected keyword arguments: 'user', 'status'. Model constructor mismatch - tests use kwargs the model doesn't accept",
      "severity": "HIGH",
      "tests": [
        "test_track_material_start_time",
        "test_record_first_access_time",
        "test_prevent_duplicate_starts",
        "test_mark_material_as_completed",
        "test_record_completion_time",
        "test_prevent_status_regression",
        "test_get_submission_status",
        "test_check_submission_received",
        "test_list_submissions_for_material",
        "test_calculate_progress_percentage",
        "test_get_overall_subject_progress",
        "test_track_time_spent_on_material",
        "test_calculate_average_time",
        "test_track_cumulative_time",
        "test_get_feedback_status_for_student",
        "test_feedback_notification_status",
        "test_list_incomplete_materials",
        "test_list_overdue_materials",
        "test_count_incomplete_materials",
        "test_compare_progress_across_students",
        "test_class_average_progress",
        "test_percentile_ranking",
        "test_generate_student_progress_summary",
        "test_track_material_attempt_count",
        "test_limit_attempts_per_material",
        "test_track_last_attempt_time",
        "test_best_attempt_score"
      ],
      "impact": "CRITICAL - All progress tracking functionality broken",
      "fix_required": true
    },
    "test_student_distribution": {
      "count": 10,
      "percentage": 40.0,
      "root_cause": "API endpoint not found or schema mismatch. Tests expect endpoints for assignment tracking that don't exist or have different schema",
      "severity": "HIGH",
      "tests": [
        "test_remove_assignment_from_student",
        "test_verify_student_received_assignment",
        "test_get_assignment_status_per_student",
        "test_list_assignments_for_material",
        "test_track_assignment_status_changes",
        "test_list_assigned_materials_for_student",
        "test_get_students_assigned_to_material",
        "test_get_students_with_assignment_status",
        "test_filter_students_by_performance_level",
        "test_filter_students_by_progress_level"
      ],
      "impact": "HIGH - Assignment tracking and student queries broken",
      "fix_required": true
    },
    "test_materials_management": {
      "count": 2,
      "percentage": 5.0,
      "root_cause": "Template cloning and tag creation endpoints missing or broken",
      "severity": "MEDIUM",
      "tests": [
        "test_clone_material_from_template",
        "test_create_material_with_tags"
      ],
      "impact": "MEDIUM - Template and tagging features not working",
      "fix_required": true
    }
  },
  "assessment": {
    "ready_for_production": false,
    "critical_issues": true,
    "blocking_issues_count": 40,
    "pass_rate_acceptable": false,
    "threshold": 95.0,
    "current_pass_rate": 83.54,
    "recommendation": "NOT_READY - Deploy blocked. Wave 1 (54/54 PASS) and Wave 3 (90/90 PASS) are production-ready, but Wave 2 has 30 failures affecting progress tracking and student distribution functionality",
    "deployment_readiness": "BLOCKED",
    "deployment_notes": [
      "Wave 1 (Authentication/Permissions): PRODUCTION_READY - 54/54 tests passing",
      "Wave 2 (Materials/Distribution/Progress): NOT_READY - 65/95 tests passing (68.4%)",
      "Wave 3 (Assignments/Submissions/Review): PRODUCTION_READY - 90/90 tests passing",
      "Overall pass rate: 83.54% (needs 95%+ for production)"
    ]
  },
  "next_steps": [
    "Fix MaterialProgress model constructor - investigate what fields it expects instead of 'user' and 'status'",
    "Verify student distribution API endpoints exist with correct schemas",
    "Implement missing template cloning and material tagging endpoints",
    "Re-run tests after fixes to ensure pass rate exceeds 95%",
    "Consider deploying Wave 1 and Wave 3 if they're independent from Wave 2 functionality"
  ]
}
