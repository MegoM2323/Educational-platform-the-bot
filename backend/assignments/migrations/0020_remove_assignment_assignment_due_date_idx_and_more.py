# Generated by Django 4.2.7 on 2025-12-28 00:28

from django.conf import settings
from django.db import migrations, models
import django.db.models.deletion


class Migration(migrations.Migration):
    dependencies = [
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
        ("assignments", "0019_merge"),
    ]

    operations = [
        migrations.RemoveIndex(
            model_name="assignment",
            name="assignment_due_date_idx",
        ),
        migrations.RemoveIndex(
            model_name="assignmentanswer",
            name="answer_submission_idx",
        ),
        migrations.RemoveIndex(
            model_name="assignmentanswer",
            name="answer_correct_idx",
        ),
        migrations.RemoveIndex(
            model_name="assignmenthistory",
            name="history_changed_by_idx",
        ),
        migrations.RemoveIndex(
            model_name="assignmentsubmission",
            name="submission_assignment_date_idx",
        ),
        migrations.RemoveIndex(
            model_name="assignmentsubmission",
            name="submission_student_idx",
        ),
        migrations.RemoveIndex(
            model_name="assignmentsubmission",
            name="submission_status_idx",
        ),
        migrations.RemoveIndex(
            model_name="assignmentsubmission",
            name="submission_graded_at_idx",
        ),
        migrations.RemoveIndex(
            model_name="peerreviewassignment",
            name="peer_review_status_idx",
        ),
        migrations.RenameIndex(
            model_name="assignmenthistory",
            new_name="assignments_assignm_754644_idx",
            old_name="assignments_assignmenthistory_assignment_change_time_idx",
        ),
        migrations.RenameIndex(
            model_name="assignmenthistory",
            new_name="assignments_changed_abbc27_idx",
            old_name="assignments_assignmenthistory_changed_by_change_time_idx",
        ),
        migrations.RenameIndex(
            model_name="gradingrubric",
            new_name="assignments_created_654195_idx",
            old_name="rubric_created_by_idx",
        ),
        migrations.RenameIndex(
            model_name="gradingrubric",
            new_name="assignments_is_temp_2138d5_idx",
            old_name="rubric_template_deleted_idx",
        ),
        migrations.RenameIndex(
            model_name="peerreviewassignment",
            new_name="pr_submission_status_idx",
            old_name="peer_review_submission_status_idx",
        ),
        migrations.RenameIndex(
            model_name="peerreviewassignment",
            new_name="pr_reviewer_status_idx",
            old_name="peer_review_reviewer_status_idx",
        ),
        migrations.RenameIndex(
            model_name="peerreviewassignment",
            new_name="pr_deadline_idx",
            old_name="peer_review_deadline_idx",
        ),
        migrations.RenameIndex(
            model_name="rubriccriterion",
            new_name="assignments_rubric__c78bd6_idx",
            old_name="criterion_rubric_order_idx",
        ),
        migrations.RenameIndex(
            model_name="rubricscore",
            new_name="assignments_submiss_bcdff2_idx",
            old_name="score_submission_criterion_idx",
        ),
        migrations.RenameIndex(
            model_name="studentdeadlineextension",
            new_name="dl_ext_assign_student",
            old_name="deadline_ext_assignment_student_idx",
        ),
        migrations.RenameIndex(
            model_name="studentdeadlineextension",
            new_name="dl_ext_student_date",
            old_name="deadline_ext_student_deadline_idx",
        ),
        migrations.RenameIndex(
            model_name="studentdeadlineextension",
            new_name="dl_ext_creator_date",
            old_name="deadline_ext_creator_date_idx",
        ),
        migrations.RenameIndex(
            model_name="submissionversion",
            new_name="assignments_submiss_a8b8b4_idx",
            old_name="assignments_submissionversion_submission_version_idx",
        ),
        migrations.RenameIndex(
            model_name="submissionversion",
            new_name="assignments_is_fina_2ba8c3_idx",
            old_name="assignments_submissionversion_is_final_idx",
        ),
        migrations.RenameIndex(
            model_name="submissionversiondiff",
            new_name="assignments_version_c9b4da_idx",
            old_name="assignments_submissionversiondiff_version_a_b_idx",
        ),
        migrations.RenameIndex(
            model_name="submissionversionrestore",
            new_name="assignments_submiss_164cc0_idx",
            old_name="assignments_submissionversionrestore_submission_date_idx",
        ),
        migrations.RenameIndex(
            model_name="submissionversionrestore",
            new_name="assignments_restore_3d38b2_idx",
            old_name="assignments_submissionversionrestore_restored_by_date_idx",
        ),
        migrations.RemoveField(
            model_name="assignment",
            name="allow_late_submissions",
        ),
        migrations.RemoveField(
            model_name="assignment",
            name="close_at",
        ),
        migrations.RemoveField(
            model_name="assignment",
            name="publish_at",
        ),
        migrations.AddField(
            model_name="assignment",
            name="allow_late_submission",
            field=models.BooleanField(
                default=True,
                help_text="Если включено, студенты могут сдать задание после срока",
                verbose_name="Разрешить поздние сдачи",
            ),
        ),
        migrations.AddField(
            model_name="assignmentsubmission",
            name="is_late",
            field=models.BooleanField(default=False, verbose_name="Поздняя сдача"),
        ),
        migrations.AlterField(
            model_name="assignment",
            name="due_date",
            field=models.DateTimeField(
                help_text="Основная дата сдачи задания", verbose_name="Срок сдачи"
            ),
        ),
        migrations.AlterField(
            model_name="assignment",
            name="late_submission_deadline",
            field=models.DateTimeField(
                blank=True,
                help_text="Если установлено, позволяет сдавать только до этого времени",
                null=True,
                verbose_name="Крайний срок для поздней сдачи",
            ),
        ),
        migrations.AlterField(
            model_name="assignmentquestion",
            name="created_at",
            field=models.DateTimeField(auto_now_add=True),
        ),
        migrations.AlterField(
            model_name="submissionexemption",
            name="exemption_created_by",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="created_exemptions",
                to=settings.AUTH_USER_MODEL,
                verbose_name="Создано",
            ),
        ),
    ]
