import{j as e,r as s}from"./react-core-JVqWokWt.js";import{_ as t,a9 as a,c as i,B as r,Z as l,$ as n,g as c,h as d,i as m,j as x,k as o,V as h,W as u,C as j,J as p,K as g,Y as f,L as N,u as v,S as b,a as y,e as _,a3 as w,a4 as k,a5 as C,a6 as q}from"./main-fde3JC90.js";import{T as E}from"./TeacherSidebar-Bwv8PTW2.js";import{a as L}from"./react-query-DqnBFrGE.js";import{c as S}from"./contentCreatorService-CIIkPfml.js";import{a as F}from"./migration-O34B3Isr.js";import{at as z,aj as I,ai as $,cb as K,an as T,a6 as V,ap as D,aF as M,bi as Q,aA as U,be as W}from"./vendor-DC2AZkDs.js";import{b as A,u as B}from"./react-router-WAeXREDX.js";import"./react-dom-DyRXjBRd.js";import"./radix-ui-Ch8xfAyl.js";import"./charts-CKrVAx-o.js";import"./d3-lib-BmB4v4DK.js";const J=({availableElements:s,selectedElements:l,selectedElementIds:n,onElementsChange:c,searchQuery:d,onSearchChange:m})=>{const x=e=>{n.includes(e)?c(n.filter(s=>s!==e)):c([...n,e])},o=(e,s)=>{const t=[...n],a="up"===s?e-1:e+1;a<0||a>=t.length||([t[e],t[a]]=[t[a],t[e]],c(t))},h=e=>({text_problem:"Ð—Ð°Ð´Ð°Ñ‡Ð°",quick_question:"Ð’Ð¾Ð¿Ñ€Ð¾Ñ",theory:"Ð¢ÐµÐ¾Ñ€Ð¸Ñ",video:"Ð’Ð¸Ð´ÐµÐ¾"}[e]||e),u=e=>({text_problem:"bg-blue-100 text-blue-800",quick_question:"bg-green-100 text-green-800",theory:"bg-purple-100 text-purple-800",video:"bg-orange-100 text-orange-800"}[e]||"bg-gray-100 text-gray-800");return e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-sm font-medium",children:"Ð‘Ð°Ð½Ðº ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð¾Ð²"}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[s.length," ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð¾Ð²"]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(t,{placeholder:"ÐŸÐ¾Ð¸ÑÐº ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð¾Ð²...",value:d,onChange:e=>m(e.target.value),className:"pl-9"})]}),e.jsx("div",{className:"border rounded-md max-h-96 overflow-y-auto",children:0===s.length?e.jsx("div",{className:"p-4 text-center text-sm text-muted-foreground",children:d?"Ð­Ð»ÐµÐ¼ÐµÐ½Ñ‚Ñ‹ Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½Ñ‹":"ÐÐµÑ‚ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ñ‹Ñ… ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð¾Ð²"}):e.jsx("div",{className:"divide-y",children:s.map(s=>{const t=n.includes(s.id);return e.jsx("div",{className:"p-3 hover:bg-accent/50 cursor-pointer transition-colors "+(t?"bg-accent/30":""),onClick:()=>x(s.id),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(a,{checked:t,onCheckedChange:()=>x(s.id),onClick:e=>e.stopPropagation()}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-medium text-sm truncate",children:s.title}),e.jsx(i,{className:`text-xs shrink-0 ${u(s.element_type)}`,variant:"secondary",children:h(s.element_type)})]}),s.description&&e.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2 mb-1",children:s.description}),e.jsxs("div",{className:"flex items-center gap-3 text-xs text-muted-foreground",children:[s.difficulty&&e.jsxs("span",{children:["Ð¡Ð»Ð¾Ð¶Ð½Ð¾ÑÑ‚ÑŒ: ",s.difficulty,"/10"]}),s.estimated_time_minutes&&e.jsxs("span",{children:[s.estimated_time_minutes," Ð¼Ð¸Ð½"]})]})]})]})},s.id)})})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-sm font-medium",children:"Ð’Ñ‹Ð±Ñ€Ð°Ð½Ð½Ñ‹Ðµ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ñ‹"}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[l.length," Ð²Ñ‹Ð±Ñ€Ð°Ð½Ð¾"]})]}),0===l.length?e.jsx("div",{className:"border rounded-md p-8 text-center",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ñ‹ Ð¸Ð· Ð±Ð°Ð½ÐºÐ° ÑÐ»ÐµÐ²Ð°"})}):e.jsx("div",{className:"space-y-2 border rounded-md p-3 max-h-96 overflow-y-auto",children:l.map((s,t)=>e.jsxs("div",{className:"flex items-center gap-2 p-3 border rounded-md bg-card hover:bg-accent/50 transition-colors",children:[e.jsxs("div",{className:"flex flex-col gap-0.5",children:[e.jsx(r,{type:"button",size:"sm",variant:"ghost",className:"h-5 w-5 p-0",onClick:()=>o(t,"up"),disabled:0===t,children:e.jsx(I,{className:"h-3 w-3"})}),e.jsx(r,{type:"button",size:"sm",variant:"ghost",className:"h-5 w-5 p-0",onClick:()=>o(t,"down"),disabled:t===l.length-1,children:e.jsx($,{className:"h-3 w-3"})})]}),e.jsx(K,{className:"h-4 w-4 text-muted-foreground shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-xs font-mono text-muted-foreground shrink-0",children:["#",t+1]}),e.jsx("span",{className:"font-medium text-sm truncate",children:s.title}),e.jsx(i,{className:`text-xs shrink-0 ${u(s.element_type)}`,variant:"secondary",children:h(s.element_type)})]}),s.estimated_time_minutes&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[s.estimated_time_minutes," Ð¼Ð¸Ð½"]})]}),e.jsx(r,{type:"button",size:"sm",variant:"ghost",onClick:()=>{return e=s.id,void c(n.filter(s=>s!==e));var e},className:"text-destructive hover:text-destructive hover:bg-destructive/10 shrink-0",children:e.jsx(T,{className:"h-4 w-4"})})]},s.id))}),l.length>0&&e.jsxs("div",{className:"border rounded-md p-3 bg-muted/50",children:[e.jsx("h4",{className:"text-xs font-medium mb-2",children:"Ð¡Ñ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ° ÑƒÑ€Ð¾ÐºÐ°"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Ð’ÑÐµÐ³Ð¾ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð¾Ð²:"}),e.jsx("span",{className:"ml-2 font-medium",children:l.length})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"ÐŸÑ€Ð¸Ð¼ÐµÑ€Ð½Ð¾Ðµ Ð²Ñ€ÐµÐ¼Ñ:"}),e.jsxs("span",{className:"ml-2 font-medium",children:[l.reduce((e,s)=>e+(s.estimated_time_minutes||0),0)," ","Ð¼Ð¸Ð½"]})]})]})]})]})]})},P=({lessonData:a,onUpdate:i})=>{var r;const[h,u]=s.useState(""),{data:j,isLoading:p}=L({queryKey:["teacher","subjects"],queryFn:async()=>(await F.get("/materials/teacher/subjects/")).data}),g=(null==j?void 0:j.subjects)||[],{data:f,isLoading:N}=L({queryKey:["content-creator","all-elements"],queryFn:()=>S.getElements({created_by:"me"}),staleTime:6e4}),v=(null==f?void 0:f.data)||[],b=s.useMemo(()=>{if(!h)return v;const e=h.toLowerCase();return v.filter(s=>{var t;return s.title.toLowerCase().includes(e)||(null==(t=s.description)?void 0:t.toLowerCase().includes(e))||s.element_type.toLowerCase().includes(e)})},[h,v]),y=s.useMemo(()=>a.element_ids.map(e=>v.find(s=>s.id===e)).filter(e=>void 0!==e),[a.element_ids,v]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"title",children:"ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ ÑƒÑ€Ð¾ÐºÐ° *"}),e.jsx(t,{id:"title",placeholder:"Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð½Ð°Ð·Ð²Ð°Ð½Ð¸Ðµ ÑƒÑ€Ð¾ÐºÐ° (3-200 ÑÐ¸Ð¼Ð²Ð¾Ð»Ð¾Ð²)",value:a.title,onChange:e=>{i({...a,title:e.target.value})},maxLength:200}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[a.title.length,"/200 ÑÐ¸Ð¼Ð²Ð¾Ð»Ð¾Ð²"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"description",children:"ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ (Ð¾Ð¿Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾)"}),e.jsx(n,{id:"description",placeholder:"ÐšÑ€Ð°Ñ‚ÐºÐ¾Ðµ Ð¾Ð¿Ð¸ÑÐ°Ð½Ð¸Ðµ ÑƒÑ€Ð¾ÐºÐ°, Ñ†ÐµÐ»Ð¸ Ð¸ Ð·Ð°Ð´Ð°Ñ‡Ð¸...",value:a.description,onChange:e=>{i({...a,description:e.target.value})},rows:3,maxLength:1e3,className:"resize-none"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[a.description.length,"/1000 ÑÐ¸Ð¼Ð²Ð¾Ð»Ð¾Ð²"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"subject",children:"ÐŸÑ€ÐµÐ´Ð¼ÐµÑ‚ *"}),p?e.jsxs("div",{className:"flex items-center gap-2 p-2 border rounded-md",children:[e.jsx(V,{className:"h-4 w-4 animate-spin"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° Ð¿Ñ€ÐµÐ´Ð¼ÐµÑ‚Ð¾Ð²..."})]}):e.jsxs(c,{value:(null==(r=a.subject_id)?void 0:r.toString())||"",onValueChange:e=>{i({...a,subject_id:Number(e)})},children:[e.jsx(d,{id:"subject",children:e.jsx(m,{placeholder:"Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð¿Ñ€ÐµÐ´Ð¼ÐµÑ‚"})}),e.jsx(x,{children:0===g.length?e.jsx("div",{className:"p-2 text-sm text-muted-foreground text-center",children:"ÐÐµÑ‚ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ñ‹Ñ… Ð¿Ñ€ÐµÐ´Ð¼ÐµÑ‚Ð¾Ð²"}):g.map(s=>e.jsx(o,{value:s.id.toString(),children:s.name},s.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Ð­Ð»ÐµÐ¼ÐµÐ½Ñ‚Ñ‹ ÑƒÑ€Ð¾ÐºÐ° *"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ñ‹ Ð¸Ð· Ð±Ð°Ð½ÐºÐ° ÐºÐ¾Ð½Ñ‚ÐµÐ½Ñ‚Ð° Ð¸ Ñ€Ð°ÑÑÑ‚Ð°Ð²ÑŒÑ‚Ðµ Ð¸Ñ… Ð² Ð½ÑƒÐ¶Ð½Ð¾Ð¼ Ð¿Ð¾Ñ€ÑÐ´ÐºÐµ"}),N?e.jsx("div",{className:"flex items-center justify-center p-8 border rounded-md",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(V,{className:"h-6 w-6 animate-spin text-primary"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð¾Ð²..."})]})}):e.jsx(J,{availableElements:b,selectedElements:y,selectedElementIds:a.element_ids,onElementsChange:e=>{i({...a,element_ids:e})},searchQuery:h,onSearchChange:u})]})]})},Y=({title:s,description:t,elementIds:a})=>{const{data:r,isLoading:l}=L({queryKey:["content-creator","all-elements"],queryFn:()=>S.getElements({created_by:"me"}),staleTime:6e4}),n=(null==r?void 0:r.data)||[],c=a.map(e=>n.find(s=>s.id===e)).filter(e=>void 0!==e),d=c.reduce((e,s)=>e+(s.estimated_time_minutes||0),0),m=c.reduce((e,s)=>e+(s.max_score||0),0),x=e=>({text_problem:"Ð—Ð°Ð´Ð°Ñ‡Ð°",quick_question:"Ð’Ð¾Ð¿Ñ€Ð¾Ñ",theory:"Ð¢ÐµÐ¾Ñ€Ð¸Ñ",video:"Ð’Ð¸Ð´ÐµÐ¾"}[e]||e),o=e=>({text_problem:"bg-blue-100 text-blue-800",quick_question:"bg-green-100 text-green-800",theory:"bg-purple-100 text-purple-800",video:"bg-orange-100 text-orange-800"}[e]||"bg-gray-100 text-gray-800");return l?e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(V,{className:"h-6 w-6 animate-spin text-primary"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° Ð¿Ñ€ÐµÐ²ÑŒÑŽ..."})]})}):s||0!==a.length?e.jsxs("div",{className:"space-y-6",children:[e.jsxs(j,{children:[e.jsxs(p,{children:[e.jsx(g,{className:"text-2xl",children:s||"Ð‘ÐµÐ· Ð½Ð°Ð·Ð²Ð°Ð½Ð¸Ñ"}),t&&e.jsx(f,{className:"text-base mt-2",children:t})]}),e.jsx(N,{children:e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{className:"h-5 w-5 text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Ð­Ð»ÐµÐ¼ÐµÐ½Ñ‚Ð¾Ð²"}),e.jsx("p",{className:"text-lg font-semibold",children:c.length})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{className:"h-5 w-5 text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Ð’Ñ€ÐµÐ¼Ñ"}),e.jsxs("p",{className:"text-lg font-semibold",children:[d," Ð¼Ð¸Ð½"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Q,{className:"h-5 w-5 text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"ÐœÐ°ÐºÑ. Ð±Ð°Ð»Ð»Ñ‹"}),e.jsx("p",{className:"text-lg font-semibold",children:m})]})]})]})})]}),0===c.length?e.jsx(h,{children:e.jsx(u,{children:"Ð”Ð¾Ð±Ð°Ð²ÑŒÑ‚Ðµ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ñ‹ Ð² ÑƒÑ€Ð¾Ðº Ð´Ð»Ñ Ð¿Ñ€ÐµÐ´Ð¿Ñ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€Ð°"})}):e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Ð¡Ð¾Ð´ÐµÑ€Ð¶Ð°Ð½Ð¸Ðµ ÑƒÑ€Ð¾ÐºÐ°"}),e.jsx("div",{className:"space-y-2",children:c.map((s,t)=>{return e.jsx(j,{className:"hover:shadow-md transition-shadow",children:e.jsx(N,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-primary text-primary-foreground font-semibold text-sm shrink-0",children:t+1}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-xl",children:(a=s.element_type,{text_problem:"ðŸ“",quick_question:"â“",theory:"ðŸ“š",video:"ðŸŽ¥"}[a]||"ðŸ“„")}),e.jsx("h4",{className:"font-medium text-base",children:s.title}),e.jsx(i,{className:`text-xs ${o(s.element_type)}`,variant:"secondary",children:x(s.element_type)})]}),s.description&&e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:s.description}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[s.estimated_time_minutes&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(M,{className:"h-3 w-3"}),e.jsxs("span",{children:[s.estimated_time_minutes," Ð¼Ð¸Ð½"]})]}),s.max_score&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Q,{className:"h-3 w-3"}),e.jsxs("span",{children:["Ð´Ð¾ ",s.max_score," Ð±Ð°Ð»Ð»Ð¾Ð²"]})]}),s.difficulty&&e.jsx("div",{className:"flex items-center gap-1",children:e.jsxs("span",{children:["Ð¡Ð»Ð¾Ð¶Ð½Ð¾ÑÑ‚ÑŒ: ",s.difficulty,"/10"]})})]})]}),e.jsx("div",{className:"shrink-0",children:e.jsx("div",{className:"w-6 h-6 rounded-full border-2 border-muted flex items-center justify-center",children:e.jsx(U,{className:"h-4 w-4 text-muted-foreground"})})})]})})},s.id);var a})})]}),e.jsx(h,{children:e.jsxs(u,{className:"text-sm",children:[e.jsx("strong",{children:"ÐŸÑ€Ð¸Ð¼ÐµÑ‡Ð°Ð½Ð¸Ðµ:"})," Ð­Ñ‚Ð¾ Ð¿Ñ€ÐµÐ²ÑŒÑŽ Ð¿Ð¾ÐºÐ°Ð·Ñ‹Ð²Ð°ÐµÑ‚, ÐºÐ°Ðº ÑƒÑ€Ð¾Ðº Ð±ÑƒÐ´ÐµÑ‚ Ð²Ñ‹Ð³Ð»ÑÐ´ÐµÑ‚ÑŒ Ð´Ð»Ñ ÑÑ‚ÑƒÐ´ÐµÐ½Ñ‚Ð°. Ð¤Ð°ÐºÑ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹ Ð¿Ñ€Ð¾Ð³Ñ€ÐµÑÑ Ð¸ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ñ‹ Ð±ÑƒÐ´ÑƒÑ‚ Ð¾Ñ‚Ð¾Ð±Ñ€Ð°Ð¶Ð°Ñ‚ÑŒÑÑ Ð¿Ð¾ÑÐ»Ðµ Ð½Ð°Ñ‡Ð°Ð»Ð° ÑƒÑ€Ð¾ÐºÐ°."]})})]}):e.jsx(h,{children:e.jsx(u,{children:"Ð—Ð°Ð¿Ð¾Ð»Ð½Ð¸Ñ‚Ðµ Ð½Ð°Ð·Ð²Ð°Ð½Ð¸Ðµ ÑƒÑ€Ð¾ÐºÐ° Ð¸ Ð²Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ñ…Ð¾Ñ‚Ñ Ð±Ñ‹ Ð¾Ð´Ð¸Ð½ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚ Ð´Ð»Ñ Ð¿Ñ€ÐµÐ´Ð¿Ñ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€Ð°"})})},Z=()=>{const{lessonId:t}=A(),a=B(),{toast:i}=v(),[l,n]=s.useState(!1),[c,d]=s.useState(!1),[m,x]=s.useState({title:"",description:"",subject_id:null,element_ids:[],is_public:!1}),[o,h]=s.useState("editor");s.useEffect(()=>{t&&u(Number(t))},[t]);const u=async e=>{var s,t;n(!0);try{const a=(await S.getLesson(e)).data;x({title:a.title,description:a.description,subject_id:(null==(s=a.subject)?void 0:s.id)||null,element_ids:(null==(t=a.elements)?void 0:t.map(e=>e.element.id))||[],is_public:a.is_public}),i({title:"Ð£Ñ€Ð¾Ðº Ð·Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½",description:`Ð—Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½ ÑƒÑ€Ð¾Ðº: ${a.title}`})}catch(r){i({title:"ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸",description:r instanceof Error?r.message:"ÐÐµ ÑƒÐ´Ð°Ð»Ð¾ÑÑŒ Ð·Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚ÑŒ ÑƒÑ€Ð¾Ðº",variant:"destructive"}),a("/dashboard/teacher/content-creator")}finally{n(!1)}},L=async e=>{if(m.title.trim())if(m.subject_id)if(0!==m.element_ids.length){d(!0);try{const s={title:m.title,description:m.description,subject:m.subject_id,element_ids:m.element_ids,is_public:!e};let r;r=t?await S.updateLesson(Number(t),s):await S.createLesson(s),i({title:"Ð£ÑÐ¿ÐµÑ…",description:e?"Ð£Ñ€Ð¾Ðº ÑÐ¾Ñ…Ñ€Ð°Ð½Ñ‘Ð½ ÐºÐ°Ðº Ñ‡ÐµÑ€Ð½Ð¾Ð²Ð¸Ðº":"Ð£Ñ€Ð¾Ðº Ð¾Ð¿ÑƒÐ±Ð»Ð¸ÐºÐ¾Ð²Ð°Ð½"}),a("/dashboard/teacher/content-creator")}catch(s){i({title:"ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ",description:s instanceof Error?s.message:"ÐÐµ ÑƒÐ´Ð°Ð»Ð¾ÑÑŒ ÑÐ¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ ÑƒÑ€Ð¾Ðº",variant:"destructive"})}finally{d(!1)}}else i({title:"ÐžÑˆÐ¸Ð±ÐºÐ° Ð²Ð°Ð»Ð¸Ð´Ð°Ñ†Ð¸Ð¸",description:"Ð”Ð¾Ð±Ð°Ð²ÑŒÑ‚Ðµ Ñ…Ð¾Ñ‚Ñ Ð±Ñ‹ Ð¾Ð´Ð¸Ð½ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚",variant:"destructive"});else i({title:"ÐžÑˆÐ¸Ð±ÐºÐ° Ð²Ð°Ð»Ð¸Ð´Ð°Ñ†Ð¸Ð¸",description:"Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð¿Ñ€ÐµÐ´Ð¼ÐµÑ‚",variant:"destructive"});else i({title:"ÐžÑˆÐ¸Ð±ÐºÐ° Ð²Ð°Ð»Ð¸Ð´Ð°Ñ†Ð¸Ð¸",description:"ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ ÑƒÑ€Ð¾ÐºÐ° Ð¾Ð±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾",variant:"destructive"})};return l?e.jsx(b,{children:e.jsxs("div",{className:"flex min-h-screen w-full",children:[e.jsx(E,{}),e.jsxs(y,{children:[e.jsxs("header",{className:"sticky top-0 z-10 flex h-16 items-center gap-4 border-b bg-background px-6",children:[e.jsx(_,{}),e.jsx("h1",{className:"text-2xl font-bold",children:"Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ ÑƒÑ€Ð¾ÐºÐ°"})]}),e.jsx("main",{className:"p-6 flex items-center justify-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx(V,{className:"h-8 w-8 animate-spin text-primary"}),e.jsx("p",{className:"text-muted-foreground",children:"Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° ÑƒÑ€Ð¾ÐºÐ°..."})]})})]})]})}):e.jsx(b,{children:e.jsxs("div",{className:"flex min-h-screen w-full",children:[e.jsx(E,{}),e.jsxs(y,{children:[e.jsxs("header",{className:"sticky top-0 z-10 flex h-16 items-center gap-4 border-b bg-background px-6",children:[e.jsx(_,{}),e.jsxs(r,{type:"button",variant:"ghost",size:"sm",onClick:()=>{a("/dashboard/teacher/content-creator")},className:"mr-2",children:[e.jsx(W,{className:"h-4 w-4 mr-2"}),"ÐÐ°Ð·Ð°Ð´"]}),e.jsx("div",{className:"flex-1",children:e.jsx("h1",{className:"text-2xl font-bold",children:t?"Ð ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ ÑƒÑ€Ð¾ÐºÐ°":"Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ ÑƒÑ€Ð¾ÐºÐ°"})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(r,{type:"button",variant:"outline",onClick:()=>L(!0),disabled:c,children:c?e.jsxs(e.Fragment,{children:[e.jsx(V,{className:"h-4 w-4 mr-2 animate-spin"}),"Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ..."]}):"Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ Ñ‡ÐµÑ€Ð½Ð¾Ð²Ð¸Ðº"}),e.jsx(r,{type:"button",onClick:()=>L(!1),disabled:c,children:c?e.jsxs(e.Fragment,{children:[e.jsx(V,{className:"h-4 w-4 mr-2 animate-spin"}),"Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ..."]}):"ÐžÐ¿ÑƒÐ±Ð»Ð¸ÐºÐ¾Ð²Ð°Ñ‚ÑŒ"})]})]}),e.jsx("main",{className:"p-6",children:e.jsxs(j,{children:[e.jsxs(p,{children:[e.jsx(g,{children:t?"Ð ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ ÑƒÑ€Ð¾ÐºÐ°":"Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ ÑƒÑ€Ð¾ÐºÐ°"}),e.jsx(f,{children:"Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ ÑƒÑ€Ð¾Ðº, Ð²Ñ‹Ð±Ñ€Ð°Ð² ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ñ‹ Ð¸Ð· Ð±Ð°Ð½ÐºÐ° ÐºÐ¾Ð½Ñ‚ÐµÐ½Ñ‚Ð° Ð¸ Ñ€Ð°ÑÑÑ‚Ð°Ð²Ð¸Ð² Ð¸Ñ… Ð² Ð½ÑƒÐ¶Ð½Ð¾Ð¼ Ð¿Ð¾Ñ€ÑÐ´ÐºÐµ"})]}),e.jsx(N,{children:e.jsxs(w,{value:o,onValueChange:e=>h(e),children:[e.jsxs(k,{className:"grid w-full grid-cols-2 mb-6",children:[e.jsx(C,{value:"editor",children:"Ð ÐµÐ´Ð°ÐºÑ‚Ð¾Ñ€"}),e.jsx(C,{value:"preview",children:"ÐŸÑ€ÐµÐ²ÑŒÑŽ"})]}),e.jsx(q,{value:"editor",className:"space-y-6",children:e.jsx(P,{lessonData:m,onUpdate:x})}),e.jsx(q,{value:"preview",children:e.jsx(Y,{title:m.title,description:m.description,elementIds:m.element_ids})})]})})]})})]})]})})};export{Z as default};
