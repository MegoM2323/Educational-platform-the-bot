# ТЕСТОВЫЕ СЦЕНАРИИ ПЛАТФОРМЫ THE_BOT
## Полный набор пользовательских сценариев по ролям

**Версия:** 1.0
**Дата:** 2026-01-01
**Цель:** Валидировать все функции платформы от лица каждого пользователя

---

## СТРУКТУРА ДОКУМЕНТА

1. **Предусловия** - какие данные должны быть в системе перед тестированием
2. **Сценарии по ролям** - для каждой роли все возможные операции
3. **Сценарии взаимодействия** - взаимодействие между ролями
4. **Проверочный лист** - краткая версия для быстрого тестирования

---

# ПРЕДУСЛОВИЯ

## Тестовые данные, которые должны быть созданы в системе

### Пользователи (должны быть созданы вручную или через админку)

```
1. admin@test.com (ADMIN)
   - is_staff: true
   - is_superuser: true

2. teacher1@test.com (TEACHER)
   - Предмет: Математика
   - Опыт: 5 лет
   - Биография: Профессиональный математик

3. teacher2@test.com (TEACHER)
   - Предмет: Английский язык
   - Опыт: 3 года
   - Биография: Носитель английского языка

4. tutor1@test.com (TUTOR)
   - Специализация: Математика и Физика
   - Опыт: 7 лет
   - Биография: Опытный репетитор

5. tutor2@test.com (TUTOR)
   - Специализация: Английский язык
   - Опыт: 4 года
   - Биография: Преподаватель английского

6. student1@test.com (STUDENT)
   - Класс/Уровень: 9 класс
   - Цель: Подготовка к ОГЭ по математике
   - Точность: 85%

7. student2@test.com (STUDENT)
   - Класс/Уровень: 11 класс
   - Цель: Подготовка к ЕГЭ по английскому
   - Точность: 78%

8. student3@test.com (STUDENT)
   - Класс/Уровень: 8 класс
   - Цель: Улучшение оценок по математике
   - Точность: 65%

9. parent1@test.com (PARENT)
   - ФИО: Иван Иванович Петров
   - Связь: Отец student1@test.com

10. parent2@test.com (PARENT)
    - ФИО: Мария Сергеевна Сидорова
    - Связь: Мать student2@test.com
```

### Предметы (должны быть созданы)

```
1. Математика (mathematics)
   - Цвет: #FF6B6B
   - Описание: Основной курс математики
   - Учитель: teacher1@test.com

2. Английский язык (english)
   - Цвет: #4ECDC4
   - Описание: Английский язык для всех уровней
   - Учитель: teacher2@test.com

3. Физика (physics)
   - Цвет: #45B7D1
   - Описание: Курс физики для средней школы
   - Учитель: teacher1@test.com
```

### Зачисления на предметы (должны быть созданы)

```
student1 → Математика (teacher1)
student1 → Физика (teacher1)
student2 → Английский язык (teacher2)
student3 → Математика (teacher1)
```

---

# СЦЕНАРИИ ПО РОЛЯМ

---

## 1. СЦЕНАРИИ ДЛЯ АДМИНИСТРАТОРА

### 1.1 Управление пользователями

#### Сценарий 1.1.1: Просмотр всех пользователей
**Шаги:**
1. Зайти как admin@test.com
2. Перейти в "Управление аккаунтами" / Admin Dashboard → Account Management
3. Просмотреть список всех пользователей

**Проверки:**
- [ ] Отображается список всех 10 пользователей
- [ ] Видны колонки: Email, Роль, Имя, Дата создания, Статус
- [ ] Есть фильтр по роли (Student, Teacher, Tutor, Parent)
- [ ] Есть поиск по email/имени
- [ ] Возможна сортировка по колонкам

#### Сценарий 1.1.2: Редактирование профиля пользователя
**Шаги:**
1. В списке пользователей нажать на student1@test.com
2. Нажать "Редактировать"
3. Изменить следующие поля:
   - Имя: "Иван Сидоров"
   - Точность: 90%
4. Сохранить изменения

**Проверки:**
- [ ] Форма открывается с текущими данными
- [ ] Все поля редактируемы
- [ ] После сохранения показывается сообщение "Профиль обновлён"
- [ ] Данные обновились в списке

#### Сценарий 1.1.3: Деактивация пользователя
**Шаги:**
1. Выбрать student1@test.com
2. Нажать "Деактивировать"
3. Подтвердить действие

**Проверки:**
- [ ] Появляется подтверждающий диалог
- [ ] После деактивации пользователь не может войти
- [ ] Пользователь отмечен как неактивный в списке

#### Сценарий 1.1.4: Создание пользователя
**Шаги:**
1. Нажать кнопку "Добавить пользователя"
2. Заполнить форму:
   - Email: newteacher@test.com
   - Пароль: SecurePass123!
   - Роль: Teacher
   - ФИ: Петр Сергеевич
3. Сохранить

**Проверки:**
- [ ] Форма открывается
- [ ] После создания пользователь доступен в списке
- [ ] Новый пользователь может войти с указанными credentials
- [ ] Заполнен профиль с основными данными

#### Сценарий 1.1.5: Массовое редактирование
**Шаги:**
1. Выбрать несколько студентов (student1, student2, student3)
2. Нажать "Действия" → "Установить группу"
3. Выбрать группу "9A" (или пример)
4. Нажать "Применить"

**Проверки:**
- [ ] Возможна многовыборка (checkboxes)
- [ ] Меню действий появляется
- [ ] Действие применяется ко всем выбранным
- [ ] Данные обновились для всех

### 1.2 Управление предметами и расписанием

#### Сценарий 1.2.1: Просмотр всех уроков
**Шаги:**
1. Перейти в "Админ расписание" / Admin Dashboard → Admin Schedule
2. Выбрать период (неделя/месяц)

**Проверки:**
- [ ] Отображается календарь с уроками
- [ ] Уроки от всех учителей видны
- [ ] Фильтр по учителю/предмету/студенту
- [ ] Каждый урок показывает: учитель, студент, время, статус

#### Сценарий 1.2.2: Редактирование урока
**Шаги:**
1. Нажать на любой урок в расписании
2. Нажать "Редактировать"
3. Изменить время (сдвинуть на 30 минут раньше)
4. Добавить ссылку Telemost
5. Сохранить

**Проверки:**
- [ ] Форма открывается с данными урока
- [ ] Можно менять время, учителя, студента, описание
- [ ] Ссылка Telemost принимается (URL валидация)
- [ ] При сохранении создается запись в LessonHistory

#### Сценарий 1.2.3: Отмена урока
**Шаги:**
1. Выбрать урок
2. Нажать "Отменить урок"
3. Указать причину отмены
4. Подтвердить

**Проверки:**
- [ ] Появляется форма с полем "Причина"
- [ ] Статус урока меняется на CANCELLED
- [ ] Уведомление отправляется студенту и учителю
- [ ] Урок остается в истории (soft delete)

#### Сценарий 1.2.4: Создание урока от администратора
**Шаги:**
1. Нажать "+ Новый урок"
2. Заполнить форму:
   - Учитель: teacher1@test.com
   - Студент: student1@test.com
   - Предмет: Математика
   - Дата и время: 2025-01-15, 14:00-14:45
   - Ссылка Telemost: https://telemost.yandex.ru/...
3. Сохранить

**Проверки:**
- [ ] Урок создан с указанными параметрами
- [ ] Валидация: учитель и студент должны быть связаны через SubjectEnrollment
- [ ] Время: начало раньше конца, не в прошлом
- [ ] Уведомления отправлены обоим участникам
- [ ] Урок появился в расписании

### 1.3 Управление материалами и заданиями

#### Сценарий 1.3.1: Просмотр всех материалов
**Шаги:**
1. Перейти "Материалы" / Admin Dashboard → Materials
2. Выбрать фильтр по предмету (Математика)

**Проверки:**
- [ ] Список всех материалов по предмету
- [ ] Каждый материал показывает: название, тип, статус, автор, дату создания
- [ ] Есть поиск по названию
- [ ] Фильтр по типу (Видео, Документ, Проблема, Вопрос)
- [ ] Фильтр по статусу (Draft, Published, Archived)

#### Сценарий 1.3.2: Просмотр отправок заданий
**Шаги:**
1. Выбрать материал → Тип: "Задание"
2. Нажать "Отправки студентов"

**Проверки:**
- [ ] Список всех отправок с статусами (На проверке, Проверено, Требует пересдачи)
- [ ] Для каждой отправки: студент, дата отправки, статус, оценка
- [ ] Возможна фильтрация по статусу
- [ ] Возможна сортировка по дате, студенту, оценке

#### Сценарий 1.3.3: Просмотр платежей
**Шаги:**
1. Перейти "Платежи" или "Управление подписками"
2. Выбрать фильтр по предмету

**Проверки:**
- [ ] Список платежей за доступ к предметам
- [ ] Информация: студент, предмет, сумма, дата, статус (Оплачено/Ожидание)
- [ ] Ссылка на Yookassa при необходимости рефанда

### 1.4 Управление заявками

#### Сценарий 1.4.1: Просмотр и обработка заявок
**Шаги:**
1. Перейти "Заявки" / Admin Dashboard
2. Отфильтровать по статусу (PENDING)

**Проверки:**
- [ ] Список новых заявок на регистрацию
- [ ] Информация: тип заявки, email, дата подачи, статус

#### Сценарий 1.4.2: Одобрение заявки
**Шаги:**
1. Выбрать заявку с статусом PENDING
2. Нажать "Одобрить"
3. Выбрать роль для нового пользователя (если нужно уточнить)
4. Подтвердить

**Проверки:**
- [ ] После одобрения создается новый пользователь
- [ ] Статус заявки меняется на APPROVED
- [ ] На email отправляются credentials (или ссылка на первый вход)
- [ ] Пользователь может войти в систему

#### Сценарий 1.4.3: Отклонение заявки
**Шаги:**
1. Выбрать заявку
2. Нажать "Отклонить"
3. Указать причину отклонения
4. Подтвердить

**Проверки:**
- [ ] Появляется форма с полем "Причина"
- [ ] Статус меняется на REJECTED
- [ ] На email отправляется уведомление с причиной
- [ ] Заявка остается в истории

---

## 2. СЦЕНАРИИ ДЛЯ УЧИТЕЛЯ

### 2.1 Управление профилем

#### Сценарий 2.1.1: Просмотр и редактирование своего профиля
**Шаги:**
1. Зайти как teacher1@test.com
2. Перейти в "Профиль"
3. Нажать "Редактировать"
4. Изменить поля:
   - Биография: "Опытный преподаватель математики с 5-летним стажем"
   - Опыт (лет): 6
   - Номер телефона: +7-XXX-XXX-XX-XX
5. Загрузить фото профиля
6. Сохранить

**Проверки:**
- [ ] Форма заполнена текущими данными
- [ ] Все поля редактируемы (кроме email и роли)
- [ ] Загрузка фото работает
- [ ] После сохранения показывается подтверждение
- [ ] Изменения видны немедленно при просмотре профиля

#### Сценарий 2.1.2: Просмотр публичного профиля другого учителя
**Шаги:**
1. Перейти в список учителей / Перейти в учительскую
2. Нажать на teacher2@test.com
3. Просмотреть её профиль

**Проверки:**
- [ ] Отображаются публичные данные (ФИ, опыт, предмет, биография)
- [ ] НЕ отображаются приватные данные (расписание, студенты, зарплата и т.д.)
- [ ] Есть кнопка "Написать сообщение" если возможен прямой чат

### 2.2 Управление студентами и предметами

#### Сценарий 2.2.1: Просмотр студентов по предмету
**Шаги:**
1. Перейти "Мои студенты" / "Класс"
2. Выбрать предмет "Математика"

**Проверки:**
- [ ] Список всех студентов на предмет Математика (student1, student3)
- [ ] Для каждого студента: ФИ, вероятность, точность, прогресс
- [ ] Есть фильтр и поиск по имени
- [ ] Можно отсортировать по прогрессу

#### Сценарий 2.2.2: Просмотр профиля студента с дополнительной информацией
**Шаги:**
1. В списке студентов нажать на student1
2. Просмотреть профиль

**Проверки:**
- [ ] Основная информация: ФИ, класс, цель, контакты
- [ ] Таб "Прогресс": прогресс по материалам и заданиям
- [ ] Таб "Расписание": уроки со student1
- [ ] Таб "Взаимодействие": отправленные сообщения и обратная связь
- [ ] Таб "История": логи активности студента
- [ ] Возможность написать сообщение / оставить комментарий

#### Сценарий 2.2.3: Добавление студента к предмету
**Шаги:**
1. Перейти "Мои студенты"
2. Нажать "+ Добавить студента"
3. Выбрать student2@test.com и предмет "Математика"
4. Сохранить

**Проверки:**
- [ ] Открывается форма/диалог выбора студента
- [ ] Можно выбрать студента из списка
- [ ] Создается новая SubjectEnrollment
- [ ] Student2 появляется в списке студентов по Математике

#### Сценарий 2.2.4: Удаление студента с предмета
**Шаги:**
1. В списке студентов нажать на меню студента
2. Выбрать "Удалить с предмета"
3. Подтвердить

**Проверки:**
- [ ] SubjectEnrollment удаляется (soft delete?)
- [ ] Студент больше не видит материалы этого предмета
- [ ] Уроки по этому предмету остаются в истории

### 2.3 Создание и управление уроками

#### Сценарий 2.3.1: Создание нового урока
**Шаги:**
1. Перейти "Расписание"
2. Нажать "+ Новый урок"
3. Заполнить форму:
   - Студент: student1@test.com
   - Предмет: Математика (заполняется автоматически)
   - Дата: 2025-01-15
   - Время начала: 14:00
   - Время конца: 14:45
   - Описание: "Подготовка к ОГЭ. Тема: Квадратные уравнения"
   - Ссылка Telemost: (опционально, можно пропустить для очного урока)
4. Сохранить

**Проверки:**
- [ ] Форма валидирует:
  - Выбранный студент должен быть зачислен на этот предмет
  - Время: start_time < end_time
  - Дата не в прошлом (для будущих уроков)
- [ ] После сохранения урок появляется в расписании
- [ ] На email student1 и teacher1 приходит уведомление
- [ ] Урок имеет статус SCHEDULED (или подобный)

#### Сценарий 2.3.2: Редактирование урока
**Шаги:**
1. Нажать на урок в расписании
2. Нажать "Редактировать"
3. Изменить:
   - Время на 15:00-15:45
   - Описание на "Подготовка к ОГЭ. Тема: Системы уравнений"
   - Добавить ссылку Telemost
4. Сохранить

**Проверки:**
- [ ] Форма открывается с текущими данными
- [ ] Изменения сохраняются
- [ ] Создается запись в LessonHistory с информацией об изменении
- [ ] Уведомления об изменении отправлены студенту

#### Сценарий 2.3.3: Отмена урока
**Шаги:**
1. Нажать на урок
2. Нажать "Отменить урок"
3. Указать причину: "Болезнь"
4. Подтвердить

**Проверки:**
- [ ] Статус урока меняется на CANCELLED
- [ ] Студент получает уведомление с причиной
- [ ] Урок остается в истории

#### Сценарий 2.3.4: Просмотр расписания на неделю/месяц
**Шаги:**
1. Перейти в "Расписание"
2. Выбрать вид: "Неделя" / "Месяц"

**Проверки:**
- [ ] Календарь отображает все уроки учителя
- [ ] Каждый урок показывает: студент, время, статус
- [ ] Можно переходить между неделями/месяцами
- [ ] Цветовое кодирование по предметам (опционально)

#### Сценарий 2.3.5: Быстрое создание урока из календаря
**Шаги:**
1. В календаре нажать на время в конкретный день
2. Откроется форма быстрого создания
3. Выбрать студента, время, описание
4. Сохранить

**Проверки:**
- [ ] Дата и примерное время уже заполнены
- [ ] Форма компактная, основные поля

### 2.4 Создание и управление материалами

#### Сценарий 2.4.1: Создание текстовой задачи
**Шаги:**
1. Перейти "Материалы"
2. Выбрать предмет "Математика"
3. Нажать "+ Новый материал"
4. Выбрать тип "Текстовая задача"
5. Заполнить форму:
   - Название: "Задача про чемпионат"
   - Текст задачи: "В чемпионате участвуют 100 школьников..."
   - Ответ: "50"
   - Уровень сложности: Средний
   - Теги: "Алгебра, Текстовые задачи, ОГЭ"
6. Сохранить как черновик

**Проверки:**
- [ ] Форма содержит все необходимые поля
- [ ] Материал сохраняется со статусом DRAFT
- [ ] Материал видит только создатель (учитель)

#### Сценарий 2.4.2: Предпросмотр материала
**Шаги:**
1. Выбрать созданный материал
2. Нажать "Предпросмотр"
3. Просмотреть, как он выглядит для студента

**Проверки:**
- [ ] Отображается название и описание
- [ ] Видна задача как её увидит студент
- [ ] НЕ видно решения/ответа в режиме предпросмотра

#### Сценарий 2.4.3: Публикация материала
**Шаги:**
1. Выбрать материал со статусом DRAFT
2. Нажать "Опубликовать"
3. Выбрать, какие группы студентов смогут видеть материал (все/конкретные)
4. Подтвердить

**Проверки:**
- [ ] Статус меняется на PUBLISHED
- [ ] Материал становится доступен для выбранных студентов
- [ ] Студенты получают уведомление о новом материале (опционально)

#### Сценарий 2.4.4: Создание вопроса (быстрого вопроса)
**Шаги:**
1. Нажать "+ Новый материал"
2. Выбрать тип "Быстрый вопрос"
3. Заполнить:
   - Вопрос: "Чему равно 2+2?"
   - Варианты ответов: "1, 3, 4, 5"
   - Правильный ответ: "4"
4. Опубликовать

**Проверки:**
- [ ] Форма простая и интуитивная
- [ ] После публикации студенты видят вопрос с вариантами
- [ ] Студенты могут выбрать ответ

#### Сценарий 2.4.5: Загрузка документа/видео
**Шаги:**
1. Нажать "+ Новый материал"
2. Выбрать тип "Документ"
3. Загрузить файл: metodichka.pdf (2MB)
4. Заполнить название и описание
5. Опубликовать

**Проверки:**
- [ ] Файл успешно загружается
- [ ] Размер файла валидируется (не более лимита)
- [ ] После опубликования студенты могут скачать файл
- [ ] Ведётся лог скачиваний (MaterialDownloadLog)

### 2.5 Управление заданиями

#### Сценарий 2.5.1: Создание домашнего задания
**Шаги:**
1. Перейти "Задания"
2. Нажать "+ Новое задание"
3. Выбрать тип "Домашняя работа"
4. Заполнить:
   - Название: "Домашняя работа №5"
   - Описание: "Решить задачи 1-10 со страницы 45 учебника"
   - Дата выдачи: 2025-01-10
   - Дата дедлайна: 2025-01-15
   - Максимальная оценка: 10
   - Максимум попыток: 3
5. Выбрать студентов, которым видно задание
6. Опубликовать

**Проверки:**
- [ ] Все поля заполнены корректно
- [ ] После публикации задание видно студентам
- [ ] На дневник студентов добавляется запись о новом задании
- [ ] Статус задания: PUBLISHED

#### Сценарий 2.5.2: Просмотр отправок решений
**Шаги:**
1. Нажать на задание
2. Нажать "Отправки студентов"

**Проверки:**
- [ ] Список всех студентов с их отправками:
  - student1: отправил 2025-01-12 (На проверке)
  - student2: не отправил (Просрочено)
  - student3: отправил 2025-01-13 (Требует пересдачи)
- [ ] Для каждой отправки видна дата, время, файл
- [ ] Есть фильтр по статусу: На проверке, Проверено, Требует пересдачи, Отсутствует

#### Сценарий 2.5.3: Оценивание задания
**Шаги:**
1. Выбрать отправку от student1
2. Нажать "Оценить"
3. Заполнить:
   - Оценка: 9
   - Комментарий: "Хорошо, но в задаче 5 ошибка в расчёте"
   - Статус: Проверено
4. Сохранить

**Проверки:**
- [ ] Форма оценивания открывается
- [ ] Можно прикрепить исправленный файл (с заметками учителя)
- [ ] Оценка валидируется (от 0 до максимума)
- [ ] После сохранения:
  - Статус меняется на GRADED
  - Student1 получает уведомление с оценкой и комментарием
  - Оценка добавляется в журнал успеваемости

#### Сценарий 2.5.4: Отправка на пересдачу
**Шаги:**
1. Выбрать отправку от student3
2. Нажать "Требует пересдачи"
3. Добавить комментарий: "Переделайте задачи 3 и 5"
4. Сохранить

**Проверки:**
- [ ] Статус меняется на REQUIRES_RESUBMISSION
- [ ] Статус видит студент и может отправить снова
- [ ] Уведомление отправлено студенту
- [ ] Счётчик попыток не обнуляется (осталось 2 попытки из 3)

#### Сценарий 2.5.5: Создание задания с критериями оценки
**Шаги:**
1. Создать новое задание "Проект"
2. В разделе "Критерии оценки" добавить:
   - Критерий 1: "Содержание" (макс 5 баллов)
   - Критерий 2: "Оформление" (макс 3 балла)
   - Критерий 3: "Оригинальность" (макс 2 балла)
3. Сохранить

**Проверки:**
- [ ] Критерии сохраняются
- [ ] При оценивании учитель может оценить по каждому критерию отдельно
- [ ] Итоговая оценка = сумма по критериям
- [ ] Студент видит развёрнутую оценку с разбором по критериям

### 2.6 Отправка и прием обратной связи

#### Сценарий 2.6.1: Просмотр комментариев к материалу
**Шаги:**
1. Перейти на материал "Задача про чемпионат"
2. Нажать "Комментарии"

**Проверки:**
- [ ] Если комментариев нет: "Комментариев нет"
- [ ] Если есть: список с автором, датой, текстом
- [ ] Учитель видит комментарии своих студентов

#### Сценарий 2.6.2: Добавление комментария студенту
**Шаги:**
1. Перейти на профиль student1
2. Нажать "Добавить комментарий"
3. Написать: "Отличная работа на последнем уроке! Продолжай в том же духе."
4. Отправить

**Проверки:**
- [ ] Комментарий сохраняется
- [ ] Student1 получает уведомление
- [ ] Комментарий видит сам учитель и администратор

### 2.7 Просмотр графика знаний и прогресса студента

#### Сценарий 2.7.1: Просмотр прогресса класса по предмету
**Шаги:**
1. Перейти "Мой класс" (или "Прогресс студентов")
2. Выбрать предмет "Математика"
3. Просмотреть таблицу с прогрессом

**Проверки:**
- [ ] Таблица показывает:
  - Студент | Пройдено элементов | Точность | Средний балл | Статус
  - student1 | 12/20 | 85% | 8.5 | На пути
  - student3 | 8/20 | 65% | 6.7 | На пути
- [ ] Есть сортировка по столбцам
- [ ] Каждый студент - кликабельная ссылка на детали

#### Сценарий 2.7.2: Просмотр деталей прогресса студента
**Шаги:**
1. Нажать на student1 в таблице прогресса
2. Просмотреть его прогресс по элементам

**Проверки:**
- [ ] График/диаграмма прохождения элементов (какие пройдены, какие нет)
- [ ] Для каждого пройденного элемента: баллы, точность, дата
- [ ] Предложение пройти следующий элемент (если есть зависимости)

### 2.8 Создание и отправка отчётов

#### Сценарий 2.8.1: Создание еженедельного отчета
**Шаги:**
1. Перейти "Отчёты"
2. Нажать "+ Новый отчет"
3. Выбрать тип "Еженедельный отчет"
4. Заполнить:
   - Неделя: 2-8 января 2025
   - Количество уроков: 4
   - Общий прогресс класса: "Студенты активно работают"
   - Основные достижения: "Все студенты освоили тему 'Квадратные уравнения'"
   - Требует внимания: "student3 отстает в прогрессе"
5. Сохранить как черновик

**Проверки:**
- [ ] Форма содержит текстовые поля и выпадающие меню
- [ ] Статус: DRAFT
- [ ] Учитель может видеть и редактировать только свой черновик

#### Сценарий 2.8.2: Отправка отчета родителям
**Шаги:**
1. Выбрать черновик отчета
2. Нажать "Отправить"
3. Выбрать получателей:
   - Родителей всех студентов класса
   - Или конкретного студента
4. Нажать "Отправить"

**Проверки:**
- [ ] Статус меняется на SENT
- [ ] Отчет отправляется на email родителям
- [ ] Родители видят отчет в своем профиле / in-app
- [ ] В отчете не видны приватные данные других студентов

#### Сценарий 2.8.3: Экспорт отчета в PDF
**Шаги:**
1. Выбрать готовый отчет
2. Нажать "Скачать PDF"

**Проверки:**
- [ ] PDF генерируется
- [ ] Содержит красиво оформленный отчет
- [ ] Все текст, таблицы и графики включены
- [ ] Файл скачивается с именем "Report_2025_week1.pdf"

### 2.9 Управление чатом и форумом

#### Сценарий 2.9.1: Отправка сообщения студенту
**Шаги:**
1. Перейти "Чаты"
2. Найти чат с student1 (или создать новый)
3. Написать сообщение: "Как дела с подготовкой? Готов ли ты к контрольной?"
4. Отправить

**Проверки:**
- [ ] Сообщение сохраняется и отправляется
- [ ] Student1 получает уведомление
- [ ] Сообщение имеет timestamp и статус "Доставлено"
- [ ] Учитель видит, прочитал ли сообщение студент

#### Сценарий 2.9.2: Создание форума по предмету
**Шаги:**
1. Перейти "Форум"
2. Нажать "+ Новый форум"
3. Заполнить:
   - Название: "Форум по Математике"
   - Предмет: Математика
   - Описание: "Место для обсуждения решений задач"
   - Тип участников: Все студенты предмета
4. Создать

**Проверки:**
- [ ] Форум создается
- [ ] Все студенты, зачисленные на Математику, видят форум
- [ ] Учитель может управлять форумом (удалять посты, банить пользователей)

#### Сценарий 2.9.3: Модерация форума
**Шаги:**
1. Перейти в форум Математики
2. Просмотреть сообщение неприемлемого содержания от какого-то студента
3. Нажать "Удалить сообщение"
4. Указать причину: "Неприемлемое содержание"

**Проверки:**
- [ ] Сообщение удаляется (soft delete?)
- [ ] На место сообщения пишется: "[Сообщение удалено модератором]"
- [ ] Создается запись о удалении (для аудита)

### 2.10 Привязка Telegram

#### Сценарий 2.10.1: Привязка аккаунта к Telegram
**Шаги:**
1. Перейти "Настройки" / "Профиль"
2. Нажать "Привязать Telegram"
3. Появляется QR-код
4. Отсканировать QR-код в Telegram боте платформы

**Проверки:**
- [ ] QR-код генерируется (с токеном TelegramLinkToken)
- [ ] После сканирования отправляется подтверждение
- [ ] Аккаунт привязывается к Telegram ID
- [ ] Появляется кнопка "Отвязать Telegram"
- [ ] Все уведомления теперь отправляются в Telegram

---

## 3. СЦЕНАРИИ ДЛЯ СТУДЕНТА

### 3.1 Управление профилем

#### Сценарий 3.1.1: Просмотр и редактирование своего профиля
**Шаги:**
1. Зайти как student1@test.com
2. Перейти в "Профиль"
3. Нажать "Редактировать"
4. Изменить:
   - Биография: "Студент 9 класса, готовлюсь к ОГЭ"
   - Телефон: +7-XXX-XXX-XX-XX
   - Загрузить фото
5. Сохранить

**Проверки:**
- [ ] Форма заполнена текущими данными
- [ ] Email и Роль не редактируются
- [ ] Цель (goal) видна студенту только если он её сам установил
- [ ] После сохранения показывается подтверждение

#### Сценарий 3.1.2: Просмотр профиля учителя
**Шаги:**
1. Перейти на профиль teacher1@test.com (ссылка из расписания/материалов)
2. Просмотреть информацию

**Проверки:**
- [ ] Видны: ФИ, предмет, опыт, биография, рейтинг
- [ ] Есть кнопка "Написать сообщение"
- [ ] НЕ видны приватные данные

#### Сценарий 3.1.3: Просмотр профиля родителя (если есть)
**Шаги:**
1. Перейти в "Мой профиль"
2. В разделе "Родитель" нажать на parent1@test.com

**Проверки:**
- [ ] Видны: ФИ, контакты родителя
- [ ] Есть кнопка "Написать сообщение"

### 3.2 Просмотр расписания и уроков

#### Сценарий 3.2.1: Просмотр расписания на неделю
**Шаги:**
1. Перейти "Расписание"
2. Выбрать "Неделя"

**Проверки:**
- [ ] Отображается календарь на неделю
- [ ] Видны все уроки student1 на неделю
- [ ] Каждый урок показывает: время, учитель, предмет, статус, ссылка Telemost (если есть)
- [ ] Можно переходить между неделями (стрелки)

#### Сценарий 3.2.2: Просмотр детали урока
**Шаги:**
1. Нажать на урок в расписании
2. Просмотреть детали

**Проверки:**
- [ ] Видна полная информация:
  - Время: 2025-01-15, 14:00-14:45
  - Учитель: teacher1@test.com
  - Предмет: Математика
  - Описание: "Подготовка к ОГЭ. Тема: Квадратные уравнения"
  - Ссылка Telemost (если очный урок - ничего)
  - Статус: SCHEDULED
- [ ] Кнопка "Присоединиться к видеоконференции" (если есть Telemost)
- [ ] Кнопка "Сообщить об отсутствии" (?)

#### Сценарий 3.2.3: Сообщение об отсутствии на уроке
**Шаги:**
1. Нажать на предстоящий урок
2. Нажать "Сообщить об отсутствии"
3. Выбрать причину: "Болезнь"
4. Добавить комментарий (опционально)
5. Отправить

**Проверки:**
- [ ] Появляется форма с причинами (Болезнь, Семейное обстоятельство, Другое)
- [ ] После отправки учитель получает уведомление
- [ ] Статус урока меняется на NO_SHOW (или ABSENT)

#### Сценарий 3.2.4: Присоединение к видеоуроку
**Шаги:**
1. За 5 минут до урока нажать кнопку "Присоединиться к видеоконференции"
2. Либо нажать на кнопку в деталях урока

**Проверки:**
- [ ] Отправляет на ссылку Telemost
- [ ] Telemost открывается в новой вкладке/окне
- [ ] Студент видит teacher1 в конференции

### 3.3 Просмотр и работа с материалами

#### Сценарий 3.3.1: Просмотр доступных предметов
**Шаги:**
1. Перейти "Мои предметы"

**Проверки:**
- [ ] Список предметов, на которые зачислен student1:
  - Математика (teacher1)
  - Физика (teacher1)
- [ ] Для каждого предмета: название, учитель, прогресс

#### Сценарий 3.3.2: Просмотр материалов по предмету
**Шаги:**
1. Нажать на "Математика"
2. Просмотреть список материалов

**Проверки:**
- [ ] Список всех опубликованных материалов:
  - "Задача про чемпионат" (Текстовая задача)
  - "Квадратные уравнения" (Документ - видео)
  - Вопрос "Чему равен дискриминант?" (Быстрый вопрос)
- [ ] Есть фильтр по типу
- [ ] Есть поиск по названию

#### Сценарий 3.3.3: Решение текстовой задачи
**Шаги:**
1. Нажать на "Задача про чемпионат"
2. Прочитать текст задачи
3. Вписать ответ: "50"
4. Нажать "Отправить ответ"

**Проверки:**
- [ ] Задача отображается полностью
- [ ] Есть поле ввода для ответа
- [ ] После отправки:
  - Если правильно: "Правильно! Ответ: 50" (+ звук/анимация)
  - Если неправильно: "Неверно. Попробуй ещё раз" (показывает, сколько попыток осталось)
- [ ] Ответ сохраняется в ElementProgress
- [ ] Прогресс обновляется

#### Сценарий 3.3.4: Ответ на быстрый вопрос
**Шаги:**
1. Нажать на вопрос "Чему равно 2+2?"
2. Выбрать ответ "4"
3. Нажать "Отправить"

**Проверки:**
- [ ] Вопрос отображается с вариантами ответов
- [ ] Вариант можно выбрать (радио-кнопка или клик по варианту)
- [ ] После отправки сразу видно результат (правильно/неправильно)
- [ ] Прогресс обновляется

#### Сценарий 3.3.5: Скачивание документа
**Шаги:**
1. Нажать на "Квадратные уравнения" (Документ)
2. Нажать "Скачать"

**Проверки:**
- [ ] PDF скачивается на компьютер
- [ ] Ведётся лог скачивания (MaterialDownloadLog)
- [ ] Учитель видит, что student1 скачал этот материал

#### Сценарий 3.3.6: Просмотр прогресса по материалам
**Шаги:**
1. Перейти "Мой прогресс" / "Прогресс по материалам"

**Проверки:**
- [ ] Таблица с информацией по каждому материалу:
  - Название | Попыток | Правильных | Точность | Статус
  - "Задача про чемпионат" | 3 | 1 | 33% | На проверке
  - "Вопрос 2+2" | 1 | 1 | 100% | Завершено
- [ ] Есть фильтр по статусу
- [ ] Можно сортировать по столбцам

### 3.4 Просмотр и выполнение заданий

#### Сценарий 3.4.1: Просмотр новых заданий
**Шаги:**
1. Перейти "Задания"
2. Выбрать фильтр "Мне нужно сделать"

**Проверки:**
- [ ] Список активных заданий:
  - "Домашняя работа №5" (Дедлайн: 2025-01-15, Статус: На проверке)
  - "Проект" (Дедлайн: 2025-01-20, Статус: Черновик)
- [ ] Для каждого задания: название, тип, дедлайн, статус
- [ ] Есть индикатор срочности (красный, если близко дедлайн)

#### Сценарий 3.4.2: Просмотр детали задания
**Шаги:**
1. Нажать на "Домашняя работа №5"
2. Просмотреть детали

**Проверки:**
- [ ] Отображается:
  - Название и описание
  - Дата выдачи: 2025-01-10
  - Дедлайн: 2025-01-15
  - Максимальная оценка: 10
  - Осталось попыток: 2 из 3
  - История отправок (если были)
- [ ] Кнопка "Отправить решение"

#### Сценарий 3.4.3: Отправка решения (файл)
**Шаги:**
1. Нажать "Отправить решение"
2. Выбрать файл с компьютера: "homeworks_5.pdf" (или сфотографировать)
3. Добавить комментарий (опционально): "Я решил все задачи"
4. Нажать "Отправить"

**Проверки:**
- [ ] Открывается файловый браузер
- [ ] Файл загружается (валидация размера)
- [ ] После отправки:
  - AssignmentSubmission создается
  - Статус: "На проверке"
  - Student1 видит: "Отправлено 2025-01-12 в 14:30"
  - Учитель получает уведомление о новой отправке
- [ ] Осталось попыток: 1 из 3

#### Сценарий 3.4.4: Просмотр оценки и обратной связи
**Шаги:**
1. Перейти на задание "Домашняя работа №5"
2. Просмотреть историю отправок
3. Нажать на проверенную отправку

**Проверки:**
- [ ] Видна:
  - Дата отправки: 2025-01-12
  - Дата проверки: 2025-01-13
  - Оценка: 9/10
  - Комментарий учителя: "Хорошо, но в задаче 5 ошибка в расчёте"
  - Загруженный файл с замечаниями (если есть)
- [ ] Можно скачать файл с замечаниями

#### Сценарий 3.4.5: Пересдача задания
**Шаги:**
1. На задании со статусом "Требует пересдачи"
2. Прочитать комментарий: "Переделайте задачи 3 и 5"
3. Загрузить исправленное решение: "homework_5_fixed.pdf"
4. Отправить

**Проверки:**
- [ ] Новая отправка создается
- [ ] Осталось попыток: 0 из 3 (последняя попытка)
- [ ] Учитель получает уведомление о пересдаче

#### Сценарий 3.4.6: Просмотр заданий с критериями оценки
**Шаги:**
1. Нажать на "Проект" (задание с критериями)
2. Просмотреть разбор критериев

**Проверки:**
- [ ] Видны критерии оценки:
  - "Содержание" (макс 5 баллов)
  - "Оформление" (макс 3 балла)
  - "Оригинальность" (макс 2 балла)
  - Максимум: 10 баллов
- [ ] После получения оценки видна развёрнутая оценка:
  - Содержание: 5/5
  - Оформление: 2/3
  - Оригинальность: 1/2
  - Итого: 8/10

### 3.5 Просмотр отчётов и прогресса

#### Сценарий 3.5.1: Просмотр отчета о прогрессе
**Шаги:**
1. Перейти "Мой прогресс" / "Отчеты"

**Проверки:**
- [ ] Доступны отчеты о прогрессе
- [ ] Для каждого предмета:
  - Прогресс: 12/20 элементов (60%)
  - Средняя точность: 85%
  - Средний балл по заданиям: 8.5/10
  - График прогресса по времени

#### Сценарий 3.5.2: Просмотр еженедельного отчета учителя
**Шаги:**
1. Перейти "Мои отчеты"
2. Просмотреть еженедельный отчет от teacher1

**Проверки:**
- [ ] Видно письмо-отчет учителя (если он был отправлен)
- [ ] Содержит: прогресс класса, достижения, требует внимания
- [ ] Может быть скачан в PDF

#### Сценарий 3.5.3: Просмотр рейтинга в классе
**Шаги:**
1. Перейти "Рейтинг класса" (если такое есть)

**Проверки:**
- [ ] Таблица со всеми студентами класса
- [ ] Сортировка по среднему баллу, прогрессу и т.д.
- [ ] Student1 видит свой рейтинг (например, 5 место из 10)

### 3.6 Чат и форум

#### Сценарий 3.6.1: Отправка сообщения учителю
**Шаги:**
1. Перейти "Чаты"
2. Найти чат с teacher1 (или создать)
3. Написать: "Можно ли получить дополнительную помощь перед ОГЭ?"
4. Отправить

**Проверки:**
- [ ] Сообщение отправляется
- [ ] Teacher1 получает уведомление
- [ ] Сообщение имеет timestamp и статус

#### Сценарий 3.6.2: Участие в форуме класса
**Шаги:**
1. Перейти "Форум"
2. Выбрать "Форум по Математике"
3. Просмотреть темы/посты

**Проверки:**
- [ ] Список всех тем/тредов в форуме
- [ ] Каждый пост: автор, дата, текст, количество ответов

#### Сценарий 3.6.3: Создание темы в форуме
**Шаги:**
1. В форуме нажать "+ Новая тема"
2. Заполнить:
   - Название: "Помощь с задачей про чемпионат"
   - Текст: "Ребята, кто-нибудь решил задачу про чемпионат? Я не понял условие..."
3. Отправить

**Проверки:**
- [ ] Тема создается
- [ ] Видна на странице форума (в начале или в конце?)
- [ ] Другие студенты видят эту тему
- [ ] Teacher1 получает уведомление (опционально)

#### Сценарий 3.6.4: Ответ на тему в форуме
**Шаги:**
1. Нажать на тему student1
2. Написать ответ: "Попробуй прочитать условие ещё раз внимательнее. Там написано..."
3. Отправить

**Проверки:**
- [ ] Ответ добавляется к теме
- [ ] Видна цепочка: Исходное сообщение → Ответ
- [ ] Student1 получает уведомление об ответе
- [ ] Все участники форума видят ответ

### 3.7 Привязка Telegram

#### Сценарий 3.7.1: Привязка аккаунта к Telegram
**Шаги:**
1. Перейти "Настройки"
2. Нажать "Привязать Telegram"
3. Отсканировать QR-код в Telegram боте

**Проверки:**
- [ ] QR-код генерируется
- [ ] После сканирования отправляется подтверждение в Telegram
- [ ] Аккаунт привязывается
- [ ] Все уведомления начинают приходить в Telegram

#### Сценарий 3.7.2: Получение уведомлений в Telegram
**Шаги:**
1. Teacher1 отправляет сообщение в чат
2. Проверить Telegram

**Проверки:**
- [ ] Student1 получает уведомление в Telegram о новом сообщении
- [ ] Можно ответить в Telegram и сообщение появится в приложении (опционально)

---

## 4. СЦЕНАРИИ ДЛЯ ТЬЮТОРА

### 4.1 Управление профилем

#### Сценарий 4.1.1: Просмотр и редактирование профиля тьютора
**Шаги:**
1. Зайти как tutor1@test.com
2. Перейти "Профиль"
3. Редактировать:
   - Биография: "Опытный репетитор по математике"
   - Специализация: Математика, Физика
   - Опыт (лет): 8
4. Сохранить

**Проверки:**
- [ ] Все поля редактируемы (кроме email)
- [ ] После сохранения изменения видны

### 4.2 Управление студентами

#### Сценарий 4.2.1: Просмотр своих студентов
**Шаги:**
1. Перейти "Мои студенты"

**Проверки:**
- [ ] Список студентов, которыми занимается tutor1
- [ ] Информация по каждому: ФИ, предметы, прогресс, последний урок
- [ ] Есть фильтр по предмету
- [ ] Кликабельная ссылка на студента

#### Сценарий 4.2.2: Просмотр деталей студента
**Шаги:**
1. Нажать на student1
2. Просмотреть его профиль и прогресс

**Проверки:**
- [ ] Видны:
  - Базовая информация
  - Предметы (которые тьютор ведёт)
  - Уроки (только те, где tutor1 участвует или которые назначены student1)
  - Прогресс по материалам
  - Задания
  - Оценки и комментарии

#### Сценарий 4.2.3: Создание студента (для нового студента)
**Шаги:**
1. Перейти "Мои студенты"
2. Нажать "+ Добавить студента"
3. Выбрать, создать новый профиль или добавить существующего
4. **Вариант 1: Новый студент**
   - Заполнить форму:
     - Email: newstudent@test.com
     - ФИ: Петр Петров
     - Класс/уровень: 10 класс
     - Цель: Подготовка к ЕГЭ
     - Пароль: генерируется автоматически
5. Сохранить

**Проверки:**
- [ ] Новый студент создается
- [ ] На email отправляются credentials
- [ ] Родитель также может быть создан (есть ли такая опция?)
- [ ] Student имеет связь с tutor1 в профиле (tutor = tutor1)

#### Сценарий 4.2.4: Добавление предмета к студенту
**Шаги:**
1. На профиле student1 нажать "+ Добавить предмет"
2. Выбрать предмет: "Математика"
3. Выбрать учителя: "teacher1@test.com"
4. Сохранить

**Проверки:**
- [ ] SubjectEnrollment создается
- [ ] Student1 теперь видит материалы и уроки по Математике
- [ ] Teacher1 видит student1 в списке студентов

### 4.3 Просмотр и управление уроками

#### Сценарий 4.3.1: Просмотр расписания своих студентов
**Шаги:**
1. Перейти "Расписание" / "Мои студенты"
2. Выбрать календарь

**Проверки:**
- [ ] Отображаются уроки всех студентов tutor1
- [ ] Каждый урок: студент, учитель, время, предмет, статус
- [ ] Цветовое кодирование по студентам (опционально)

#### Сценарий 4.3.2: Просмотр прогресса студента по урокам
**Шаги:**
1. На профиле student1 перейти в "Уроки"

**Проверки:**
- [ ] История уроков: дата, учитель, предмет, время, статус
- [ ] Можно фильтровать по предмету/учителю/статусу

### 4.4 Просмотр прогресса студентов

#### Сценарий 4.4.1: Просмотр прогресса класса (своих студентов)
**Шаги:**
1. Перейти "Прогресс студентов"

**Проверки:**
- [ ] Таблица со всеми своими студентами:
  - ФИ | Предмет | Прогресс | Точность | Последняя активность
  - student1 | Математика | 12/20 | 85% | 2025-01-10
  - student3 | Математика | 8/20 | 65% | 2025-01-08
- [ ] Можно сортировать и фильтровать

#### Сценарий 4.4.2: Просмотр деталей прогресса студента
**Шаги:**
1. Нажать на student1 в таблице прогресса

**Проверки:**
- [ ] График прогресса по элементам
- [ ] Детальная информация по каждому элементу
- [ ] Анализ: какие элементы даются студенту сложно

### 4.5 Добавление комментариев и обратной связи

#### Сценарий 4.5.1: Добавление комментария к материалу
**Шаги:**
1. На профиле student1 перейти на материал "Задача про чемпионат"
2. Нажать "Добавить комментарий"
3. Написать: "Отличное решение! Обрати внимание на оформление."
4. Отправить

**Проверки:**
- [ ] Комментарий сохраняется
- [ ] Видит student1 (получает уведомление)
- [ ] Видят teacher1 и admin

#### Сценарий 4.5.2: Добавление комментария на профиль студента
**Шаги:**
1. На профиле student1 нажать "Добавить комментарий"
2. Написать: "Молодец! На последних двух уроках видно улучшение!"
3. Отправить

**Проверки:**
- [ ] Комментарий сохраняется
- [ ] Student1 получает уведомление
- [ ] Видит teacher1 и admin
- [ ] Комментарий видит tutor1 (автор)

### 4.6 Создание еженедельных отчётов

#### Сценарий 4.6.1: Создание еженедельного отчета о студентах
**Шаги:**
1. Перейти "Отчеты"
2. Нажать "+ Новый отчет"
3. Выбрать тип "Еженедельный отчет тьютора"
4. Выбрать студентов: student1, student3
5. Заполнить:
   - Неделя: 2-8 января
   - Прогресс student1: "Отличный прогресс, освоил новую тему"
   - Прогресс student3: "Медленнее продвигается, нужна дополнительная поддержка"
6. Сохранить и отправить

**Проверки:**
- [ ] Отчет создается
- [ ] Отправляется родителям (parent1, parent3)
- [ ] Отправляется учителям (teacher1)
- [ ] Отправляется студентам
- [ ] Статус: SENT

### 4.7 Управление форумом тьютора

#### Сценарий 4.7.1: Создание форума со своими студентами
**Шаги:**
1. Перейти "Форум"
2. Нажать "+ Создать форум"
3. Заполнить:
   - Название: "Форум Тьютора - Математика"
   - Тип: FORUM_TUTOR
   - Студенты: student1, student3
   - Описание: "Обсуждение математики и подготовка к экзаменам"
4. Создать

**Проверки:**
- [ ] Форум создается с типом FORUM_TUTOR
- [ ] Видят только student1 и student3
- [ ] Tutor1 может модерировать форум

#### Сценарий 4.7.2: Модерирование форума
**Шаги:**
1. В форуме удалить неприемлемое сообщение
2. Указать причину: "Оффтопик"

**Проверки:**
- [ ] Сообщение удаляется (soft delete)
- [ ] Создается запись об удалении (для аудита)

### 4.8 Чат с студентами

#### Сценарий 4.8.1: Отправка сообщения студенту
**Шаги:**
1. Перейти "Чаты"
2. Найти чат с student1
3. Написать: "Как ты готовился к контрольной? Есть ли вопросы?"
4. Отправить

**Проверки:**
- [ ] Сообщение отправляется
- [ ] Student1 получает уведомление
- [ ] Сообщение имеет timestamp

---

## 5. СЦЕНАРИИ ДЛЯ РОДИТЕЛЯ

### 5.1 Управление профилем

#### Сценарий 5.1.1: Просмотр и редактирование профиля
**Шаги:**
1. Зайти как parent1@test.com
2. Перейти "Профиль"
3. Редактировать:
   - Телефон: +7-XXX-XXX-XX-XX
   - Адрес: Москва, ул. Примерная
4. Сохранить

**Проверки:**
- [ ] Форма редактирования
- [ ] Email не редактируется
- [ ] Изменения сохраняются

### 5.2 Просмотр информации о детях

#### Сценарий 5.2.1: Просмотр списка своих детей
**Шаги:**
1. Перейти "Мои дети" или "Профиль"
2. Просмотреть список

**Проверки:**
- [ ] Видны все дети parent1
- [ ] Для каждого ребенка: ФИ, класс, предметы
- [ ] Кликабельная ссылка на профиль ребенка

#### Сценарий 5.2.2: Просмотр профиля ребенка
**Шаги:**
1. Нажать на student1 (в списке детей)
2. Просмотреть его профиль

**Проверки:**
- [ ] Видна информация:
  - ФИ, класс, цель
  - Учителя и тьютор (если есть)
  - Общий прогресс
  - Предметы, на которые зачислен
  - Уроки (расписание)
  - Оценки и задания

### 5.3 Просмотр расписания и уроков ребенка

#### Сценарий 5.3.1: Просмотр расписания ребенка на неделю
**Шаги:**
1. На профиле student1 перейти "Расписание" / "Уроки"
2. Выбрать "Неделя"

**Проверки:**
- [ ] Календарь с уроками student1
- [ ] Время, учитель, предмет, статус урока
- [ ] Ссылка на видеоконференцию (если есть)

#### Сценарий 5.3.2: Просмотр деталей урока
**Шаги:**
1. Нажать на урок
2. Просмотреть информацию

**Проверки:**
- [ ] Видна полная информация об уроке
- [ ] Можно ли посмотреть ссылку Telemost? (вероятно, нет доступа)

### 5.4 Просмотр прогресса и оценок

#### Сценарий 5.4.1: Просмотр прогресса ребенка по предметам
**Шаги:**
1. На профиле student1 перейти "Прогресс"

**Проверки:**
- [ ] Таблица прогресса по каждому предмету:
  - Предмет | Пройдено | Точность | Средний балл | Статус
  - Математика | 12/20 | 85% | 8.5 | На пути
  - Физика | 8/15 | 75% | 7.8 | На пути
- [ ] Графики прогресса

#### Сценарий 5.4.2: Просмотр оценок по заданиям
**Шаги:**
1. На профиле student1 перейти "Задания"

**Проверки:**
- [ ] Список всех заданий с оценками:
  - Домашняя работа №5 | 9/10 | Проверено
  - Проект | Не отправлено | На проверке
- [ ] Можно просмотреть детали каждого задания
- [ ] Видна обратная связь учителя

#### Сценарий 5.4.3: Просмотр еженедельного отчета
**Шаги:**
1. На профиле student1 перейти "Отчеты"

**Проверки:**
- [ ] Список отчётов от учителей и тьютора
- [ ] Содержание отчёта: прогресс, достижения, требует внимания
- [ ] Можно скачать PDF
- [ ] Дата отправки отчёта

### 5.5 Чат с учителями и тьютором

#### Сценарий 5.5.1: Отправка сообщения учителю
**Шаги:**
1. На профиле student1 нажать кнопку "Написать учителю"
2. Выбрать учителя: teacher1@test.com
3. Написать: "Добрый день. Как дела с подготовкой к ОГЭ?"
4. Отправить

**Проверки:**
- [ ] Сообщение отправляется
- [ ] Teacher1 получает уведомление
- [ ] Создается чат между parent1 и teacher1

#### Сценарий 5.5.2: Чат с тьютором
**Шаги:**
1. На профиле student1 нажать "Написать тьютору"
2. Написать сообщение
3. Отправить

**Проверки:**
- [ ] Сообщение отправляется tutor1
- [ ] Создается чат

#### Сценарий 5.5.3: Просмотр чата
**Шаги:**
1. Перейти "Чаты"
2. Выбрать чат с teacher1

**Проверки:**
- [ ] История сообщений видна
- [ ] Можно читать и отправлять новые сообщения

### 5.6 Уведомления

#### Сценарий 5.6.1: Получение уведомления о новой оценке
**Шаги:**
1. Teacher1 выставляет оценку student1
2. Parent1 получает уведомление

**Проверки:**
- [ ] В приложении появляется уведомление
- [ ] На email приходит письмо (если включено)
- [ ] В Telegram (если привязан аккаунт)

#### Сценарий 5.6.2: Получение уведомления об отчёте
**Шаги:**
1. Teacher1 отправляет еженедельный отчет
2. Parent1 получает уведомление

**Проверки:**
- [ ] Уведомление о новом отчёте
- [ ] Отчёт доступен для просмотра

---

## 6. СЦЕНАРИИ ВЗАИМОДЕЙСТВИЯ МЕЖДУ РОЛЯМИ

### 6.1 Сценарий создания новогвого студента и его обучение

**Цепочка действий:**

**Шаг 1: Создание заявки (Публичный API)**
- Потенциальный студент заполняет форму регистрации на платформе
- Email: newcomer@test.com, Роль: Student, ФИ: Иван Новый
- Статус заявки: PENDING

**Шаг 2: Обработка заявки (Администратор)**
- Admin переходит в "Заявки"
- Видит заявку со статусом PENDING
- Нажимает "Одобрить"
- Создается новый User с email newcomer@test.com
- На email отправляются credentials
- Статус заявки: APPROVED

**Шаг 3: Первый вход студента**
- Student входит в систему
- Заполняет профиль: класс, цель, телефон
- Видит пустое расписание и нет материалов

**Шаг 4: Назначение студента учителю (Вариант 1 - через учителя)**
- Teacher1 переходит в "Мои студенты" → "+ Добавить студента"
- Выбирает newcomer@test.com и Предмет "Математика"
- Создается SubjectEnrollment
- Student теперь видит материалы по Математике

**Шаг 5: Назначение студента тьютору (Вариант 2 - через тьютора)**
- Tutor1 создает нового студента или добавляет существующего
- Добавляет предмет "Математика" с teacher1
- Student теперь имеет связь Tutor = tutor1

**Шаг 6: Создание первого урока (Учитель)**
- Teacher1 создает первый урок для newcomer
- Заполняет: дата, время, описание, ссылку Telemost
- Статус: SCHEDULED

**Шаг 7: Уведомления**
- Student получает уведомление об урок
- Tutor получает уведомление (если есть связь)
- Parent получает уведомление (если указан)

**Шаг 8: Урок**
- Student присоединяется к видеоконференции
- Урок проводится

**Шаг 9: Выдача материалов (Учитель)**
- Teacher1 публикует материал "Введение в Алгебру"
- Student видит материал и может начать работать

**Шаг 10: Прогресс (Student)**
- Student решает задачи из материала
- Прогресс обновляется в ElementProgress и MaterialProgress
- Точность и баллы обновляются

**Шаг 11: Выдача задания (Учитель)**
- Teacher1 создает домашнее задание
- Student видит задание, отправляет решение

**Шаг 12: Проверка (Учитель)**
- Teacher1 видит отправку
- Оценивает, добавляет комментарий
- Отправляет обратную связь

**Шаг 13: Отчеты (Учитель)**
- Teacher1 создает еженедельный отчет с информацией о Student
- Отправляет Parent и Student

**Шаг 14: Уведомления родителю (Parent)**
- Parent получает уведомление об отчёте
- Просматривает прогресс ребенка
- Видит оценки и комментарии

### 6.2 Сценарий взаимодействия Student - Teacher - Tutor - Parent

**1. Student не готов к контрольной**

- Student отправляет сообщение Tutor1: "Я не понял тему квадратные уравнения"
- Tutor1 видит сообщение и пишет Student: "Давай проведем дополнительное занятие"
- Tutor1 пишет Teacher1: "Student требует дополнительной поддержки"
- Teacher1 видит сообщение и добавляет комментарий на профиль Student
- Tutor1 и Teacher1 договариваются об дополнительном уроке
- Teacher1 создает новый урок для Student
- Student посещает урок
- Tutor1 добавляет комментарий в профиль: "После урока понял лучше"
- Teacher1 создает дополнительные материалы
- Student решает материалы
- Tutor1 проверяет, что Student разобрался
- Tutor1 добавляет информацию в еженедельный отчет
- Parent получает отчет и видит: "Student требовал поддержки, но после дополнительных занятий прогресс улучшился"

### 6.3 Сценарий модерации форума

**1. Student создает неприемлемое сообщение в форуме**
- Student пишет оскорблеивающее сообщение
- Teacher1 видит это и удаляет сообщение, указав причину "Нарушение правил"
- Если повторяется, Teacher1 может забанить Student в форуме
- Admin видит все удаленные сообщения и может провести расследование

---

# ПРОВЕРОЧНЫЙ ЛИСТ (КРАТКАЯ ВЕРСИЯ)

Используйте этот список для быстрого тестирования основных функций:

## АДМИНИСТРАТОР
- [ ] Просмотр всех пользователей
- [ ] Редактирование пользователя
- [ ] Создание пользователя
- [ ] Просмотр и редактирование расписания
- [ ] Создание урока
- [ ] Отмена урока
- [ ] Просмотр заявок
- [ ] Одобрение заявки

## УЧИТЕЛЬ
- [ ] Редактирование профиля
- [ ] Просмотр студентов по предмету
- [ ] Создание урока
- [ ] Редактирование урока
- [ ] Отмена урока
- [ ] Создание материала (разные типы)
- [ ] Публикация материала
- [ ] Создание задания
- [ ] Просмотр отправок студентов
- [ ] Оценивание задания
- [ ] Просмотр прогресса класса
- [ ] Создание еженедельного отчета
- [ ] Отправка отчета родителям
- [ ] Отправка сообщения студенту
- [ ] Модерация форума

## СТУДЕНТ
- [ ] Редактирование профиля
- [ ] Просмотр расписания
- [ ] Присоединение к видеоуроку
- [ ] Просмотр материалов
- [ ] Решение задачи
- [ ] Ответ на вопрос
- [ ] Скачивание документа
- [ ] Просмотр заданий
- [ ] Отправка решения задания
- [ ] Просмотр оценки и обратной связи
- [ ] Пересдача задания
- [ ] Просмотр прогресса
- [ ] Отправка сообщения учителю
- [ ] Участие в форуме
- [ ] Создание темы в форуме

## ТЬЮТОР
- [ ] Редактирование профиля
- [ ] Просмотр своих студентов
- [ ] Создание нового студента
- [ ] Добавление предмета к студенту
- [ ] Просмотр прогресса студентов
- [ ] Добавление комментариев
- [ ] Создание еженедельного отчета
- [ ] Управление форумом
- [ ] Отправка сообщения студенту

## РОДИТЕЛЬ
- [ ] Редактирование профиля
- [ ] Просмотр списка детей
- [ ] Просмотр расписания ребенка
- [ ] Просмотр прогресса ребенка
- [ ] Просмотр оценок по заданиям
- [ ] Просмотр еженедельного отчета
- [ ] Отправка сообщения учителю
- [ ] Чат с тьютором

## КРОССФУНКЦИОНАЛЬНЫЕ СЦЕНАРИИ
- [ ] Полный цикл: создание студента → уроки → материалы → задания → оценки → отчет
- [ ] Взаимодействие Student-Teacher-Tutor-Parent
- [ ] Модерация форума
- [ ] Платежи и подписки (если применимо)
- [ ] Привязка Telegram

---

# ПРОБЛЕМЫ, КОТОРЫЕ НУЖНО ПРОВЕРИТЬ

При тестировании следите за этими потенциальными проблемами:

## Безопасность и доступ
- [ ] Студент НЕ может видеть уроки других студентов
- [ ] Родитель видит только своих детей
- [ ] Тьютор видит только своих студентов
- [ ] Учитель видит только своих студентов
- [ ] Admin видит ВСЕ данные
- [ ] Никто НЕ видит пароли

## Уведомления
- [ ] Уведомления отправляются правильным людям
- [ ] Уведомления содержат нужную информацию
- [ ] Нет лишних уведомлений
- [ ] Уведомления идут в правильный канал (email, in-app, Telegram)

## Валидация данных
- [ ] Время урока: start < end
- [ ] Дата урока не в прошлом
- [ ] Дедлайн задания >= дата выдачи
- [ ] Email валидный
- [ ] Телефон валидный
- [ ] Оценка от 0 до максимума
- [ ] Студент зачислен на предмет, когда создается урок/материал

## Данные и история
- [ ] LessonHistory ведется при редактировании урока
- [ ] MaterialDownloadLog ведется при скачивании материала
- [ ] ElementProgress обновляется при решении задачи
- [ ] MaterialProgress обновляется
- [ ] Soft deletes работают (удаленные данные не видны, но есть в БД)
- [ ] Все изменения отслеживаются

## Интеграции
- [ ] Ссылка Telemost открывается правильно
- [ ] Email уведомления отправляются
- [ ] Telegram уведомления отправляются (если включено)
- [ ] Платежи обрабатываются правильно (если используется)

---

**Последнее обновление:** 2026-01-01
**Статус:** Готов к использованию
