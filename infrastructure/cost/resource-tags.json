{
  "tagging_strategy": {
    "description": "Comprehensive resource tagging strategy for cost tracking and optimization",
    "version": "1.0",
    "effective_date": "2024-01-01",
    "compliance": {
      "required": true,
      "enforcement": "automated-via-scp",
      "penalty": "resource-termination-if-non-compliant"
    }
  },
  "mandatory_tags": {
    "project": {
      "description": "Project or product name",
      "examples": [
        "thebot-platform",
        "infrastructure",
        "analytics",
        "internal-tools"
      ],
      "case_sensitivity": "lowercase",
      "max_length": 50,
      "required": true,
      "usage": "cost-center-allocation"
    },
    "environment": {
      "description": "Environment where resource runs",
      "allowed_values": [
        "development",
        "staging",
        "production"
      ],
      "case_sensitivity": "lowercase",
      "required": true,
      "usage": "cost-tracking-and-environment-isolation"
    },
    "owner": {
      "description": "Team or person responsible for resource",
      "examples": [
        "devops-team",
        "platform-team",
        "infrastructure-team",
        "security-team",
        "engineering-team"
      ],
      "case_sensitivity": "lowercase",
      "max_length": 50,
      "required": true,
      "usage": "accountability-and-notifications"
    },
    "cost_center": {
      "description": "Cost center for billing allocation",
      "allowed_values": [
        "engineering",
        "operations",
        "infrastructure",
        "product",
        "research"
      ],
      "case_sensitivity": "lowercase",
      "required": true,
      "usage": "financial-tracking"
    }
  },
  "recommended_tags": {
    "application": {
      "description": "Specific application or service",
      "examples": [
        "api-gateway",
        "database",
        "cache",
        "queue",
        "monitoring"
      ],
      "case_sensitivity": "lowercase",
      "max_length": 50,
      "required": false,
      "usage": "detailed-cost-tracking"
    },
    "team": {
      "description": "Team responsible for maintenance",
      "examples": [
        "platform",
        "infrastructure",
        "security",
        "backend",
        "frontend"
      ],
      "case_sensitivity": "lowercase",
      "max_length": 50,
      "required": false,
      "usage": "team-assignment"
    },
    "backup_policy": {
      "description": "Backup retention policy",
      "allowed_values": [
        "none",
        "daily",
        "weekly",
        "monthly",
        "yearly"
      ],
      "case_sensitivity": "lowercase",
      "required": false,
      "usage": "disaster-recovery"
    },
    "compliance_level": {
      "description": "Compliance requirements",
      "allowed_values": [
        "public",
        "internal",
        "confidential",
        "restricted",
        "pii"
      ],
      "case_sensitivity": "lowercase",
      "required": false,
      "usage": "security-and-compliance"
    },
    "cost_optimization": {
      "description": "Cost optimization preference",
      "allowed_values": [
        "spot-eligible",
        "reserved-instance",
        "on-demand",
        "mixed"
      ],
      "case_sensitivity": "lowercase",
      "required": false,
      "usage": "optimization-strategy"
    },
    "lifecycle": {
      "description": "Resource lifecycle stage",
      "allowed_values": [
        "experimental",
        "development",
        "production",
        "deprecated",
        "archived"
      ],
      "case_sensitivity": "lowercase",
      "required": false,
      "usage": "resource-management"
    },
    "cost_anomaly_threshold": {
      "description": "Cost anomaly detection threshold in USD",
      "example": "100",
      "required": false,
      "usage": "anomaly-detection"
    }
  },
  "tagging_examples": {
    "ec2_instance_production": {
      "project": "thebot-platform",
      "environment": "production",
      "owner": "infrastructure-team",
      "cost_center": "infrastructure",
      "application": "api-gateway",
      "team": "platform",
      "backup_policy": "daily",
      "compliance_level": "confidential",
      "cost_optimization": "reserved-instance",
      "lifecycle": "production"
    },
    "rds_database_development": {
      "project": "thebot-platform",
      "environment": "development",
      "owner": "platform-team",
      "cost_center": "engineering",
      "application": "database",
      "team": "backend",
      "backup_policy": "weekly",
      "compliance_level": "internal",
      "cost_optimization": "on-demand",
      "lifecycle": "development"
    },
    "s3_bucket_archive": {
      "project": "thebot-platform",
      "environment": "production",
      "owner": "infrastructure-team",
      "cost_center": "infrastructure",
      "application": "storage",
      "team": "infrastructure",
      "backup_policy": "yearly",
      "compliance_level": "restricted",
      "cost_optimization": "mixed",
      "lifecycle": "archived"
    },
    "lambda_spot_workload": {
      "project": "thebot-platform",
      "environment": "production",
      "owner": "platform-team",
      "cost_center": "engineering",
      "application": "batch-processor",
      "team": "platform",
      "backup_policy": "none",
      "compliance_level": "internal",
      "cost_optimization": "spot-eligible",
      "lifecycle": "production"
    }
  },
  "implementation_guidelines": {
    "aws_resources": {
      "description": "AWS tagging implementation",
      "key_considerations": [
        "Use lowercase for tag keys and values (AWS enforces case sensitivity)",
        "Avoid special characters; use hyphens for readability",
        "Maximum 50 tags per resource",
        "Maximum 256 characters per tag key/value",
        "Tag keys are case-sensitive",
        "Implement tag compliance via Service Control Policies (SCPs)"
      ],
      "automation": {
        "tool": "AWS Resource Groups Tagging API",
        "method": "Infrastructure-as-Code (Terraform)",
        "enforcement": "AWS Config and SCPs",
        "monitoring": "CloudWatch and Cost Explorer"
      }
    },
    "kubernetes_resources": {
      "description": "Kubernetes tagging implementation",
      "mapping": {
        "project": "labels.app.project",
        "environment": "labels.app.environment",
        "owner": "labels.app.owner",
        "cost_center": "labels.app.cost-center",
        "application": "labels.app.name"
      },
      "namespace_labels": {
        "environment": "required",
        "team": "required",
        "cost-center": "required"
      }
    },
    "infrastructure_as_code": {
      "terraform": {
        "example": "common_tags = {\n  project     = var.project_name\n  environment = var.environment\n  owner       = var.owner\n  cost_center = var.cost_center\n}\n\nresource \"aws_instance\" \"web\" {\n  # ... other configuration ...\n  tags = merge(common_tags, {\n    application = \"web-server\"\n  })\n}",
        "best_practice": "Use common_tags variable for all resources"
      },
      "cloudformation": {
        "example": "Tags:\n  - Key: project\n    Value: !Ref ProjectName\n  - Key: environment\n    Value: !Ref Environment\n  - Key: owner\n    Value: !Ref Owner\n  - Key: cost_center\n    Value: !Ref CostCenter",
        "best_practice": "Use CloudFormation parameters for tag values"
      }
    }
  },
  "cost_allocation_rules": {
    "environment_cost_split": {
      "development": {
        "weight": 0.1,
        "description": "10% of total infrastructure cost"
      },
      "staging": {
        "weight": 0.2,
        "description": "20% of total infrastructure cost"
      },
      "production": {
        "weight": 0.7,
        "description": "70% of total infrastructure cost"
      }
    },
    "cost_center_allocation": {
      "engineering": {
        "percentage": 40,
        "services": ["compute", "database", "development-tools"]
      },
      "operations": {
        "percentage": 30,
        "services": ["monitoring", "logging", "backup"]
      },
      "infrastructure": {
        "percentage": 30,
        "services": ["networking", "storage", "security"]
      }
    },
    "project_allocation": {
      "thebot-platform": {
        "percentage": 60,
        "owner": "platform-team"
      },
      "infrastructure": {
        "percentage": 30,
        "owner": "infrastructure-team"
      },
      "analytics": {
        "percentage": 10,
        "owner": "analytics-team"
      }
    }
  },
  "cost_optimization_strategies": {
    "spot_instance_tagging": {
      "use_case": "Batch processing, CI/CD, testing",
      "tag_requirement": "cost_optimization=spot-eligible",
      "cost_savings": "70%",
      "implementation": [
        "Mark resources as spot-eligible",
        "Use AWS Spot Fleet for orchestration",
        "Implement proper error handling for interruptions"
      ]
    },
    "reserved_instance_tagging": {
      "use_case": "Production workloads with predictable load",
      "tag_requirement": "cost_optimization=reserved-instance",
      "cost_savings": "40%",
      "implementation": [
        "Identify resources for 1-year or 3-year reservations",
        "Use Reserved Instance Marketplace",
        "Set up automatic renewal alerts"
      ]
    },
    "resource_scheduling": {
      "use_case": "Development and staging non-critical resources",
      "tag_requirement": "lifecycle=development or staging",
      "cost_savings": "50% during off-hours",
      "implementation": [
        "Automate shutdown after business hours",
        "Implement instance scheduling via EventBridge",
        "Monitor for orphaned resources"
      ]
    },
    "data_tiering": {
      "use_case": "Storage optimization",
      "tag_requirement": "backup_policy=* and lifecycle=archived",
      "cost_savings": "70% for infrequent data",
      "implementation": [
        "Move old data to S3 Glacier",
        "Implement lifecycle policies",
        "Archive logs and backups automatically"
      ]
    }
  },
  "monitoring_and_reporting": {
    "cost_explorer_dashboards": [
      {
        "name": "Cost by Environment",
        "dimensions": ["environment"],
        "frequency": "daily"
      },
      {
        "name": "Cost by Owner",
        "dimensions": ["owner"],
        "frequency": "daily"
      },
      {
        "name": "Cost by Cost Center",
        "dimensions": ["cost_center"],
        "frequency": "weekly"
      },
      {
        "name": "Cost by Application",
        "dimensions": ["application"],
        "frequency": "weekly"
      }
    ],
    "alerts": {
      "daily_summary": {
        "schedule": "09:00 UTC daily",
        "recipients": ["devops-team@company.com"],
        "content": "Cost summary by environment and project"
      },
      "anomaly_detection": {
        "schedule": "continuous",
        "threshold": "$100 deviation",
        "recipients": ["devops-team@company.com", "cost-optimization@company.com"]
      },
      "budget_threshold": {
        "50_percent": "informational alert",
        "80_percent": "warning alert",
        "100_percent": "critical alert with escalation"
      }
    }
  },
  "tag_governance": {
    "enforcement_methods": [
      "AWS Service Control Policies (SCPs)",
      "AWS Config Rules",
      "AWS CloudFormation Stack Policies",
      "Custom Lambda validators"
    ],
    "remediation": {
      "missing_tags": "Resource termination after 30-day warning",
      "non_compliant_tags": "Automated tag correction if possible, escalation if not",
      "orphaned_resources": "Identification and cleanup reports"
    },
    "audit_frequency": "Weekly",
    "compliance_report": "Monthly to finance and operations teams"
  },
  "special_cases": {
    "shared_resources": {
      "description": "Resources used by multiple projects",
      "recommendation": "Create secondary tag 'shared_projects' listing all projects",
      "cost_allocation": "Split cost based on usage metrics"
    },
    "shared_infrastructure": {
      "description": "Core infrastructure supporting all projects",
      "examples": ["VPC", "NAT Gateway", "Load Balancer"],
      "cost_allocation": "Allocate as infrastructure cost center",
      "tag": "cost_center=infrastructure"
    },
    "temporary_resources": {
      "description": "Short-lived testing or spike resources",
      "recommendation": "lifecycle=experimental with expiration date",
      "cleanup": "Automated removal after expiration"
    }
  }
}
