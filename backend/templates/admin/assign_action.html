{% extends "admin/base_site.html" %}
{% load admin_urls static %}

{% block content %}
<h1>{{ title }}</h1>

<form method="post">
  {% csrf_token %}

  <div style="background-color: #f8f9fa; padding: 20px; border-radius: 4px; margin-bottom: 20px;">
    <h2>Выберите {{ option_label|lower }}</h2>
    <select name="{% if action == 'assign_students_to_parent' %}parent_id{% else %}tutor_id{% endif %}" style="padding: 8px; font-size: 14px; min-width: 300px;">
      <option value="">-- Выберите {{ option_label|lower }} --</option>
      {% for option in options %}
        <option value="{{ option.id }}">{{ option.get_full_name }} ({{ option.username }})</option>
      {% endfor %}
    </select>
  </div>

  <div style="background-color: #e8f4f8; padding: 15px; border-radius: 4px; margin-bottom: 20px;">
    <p><strong>Количество студентов для назначения:</strong> {{ queryset.count }}</p>
    <table style="width: 100%; margin-top: 10px; font-size: 13px;">
      <thead>
        <tr style="border-bottom: 1px solid #ddd;">
          <th style="text-align: left; padding: 5px;">Студент</th>
          <th style="text-align: left; padding: 5px;">Email</th>
        </tr>
      </thead>
      <tbody>
        {% for item in queryset|slice:":10" %}
          <tr style="border-bottom: 1px solid #eee;">
            <td style="padding: 5px;">{{ item.user.get_full_name }}</td>
            <td style="padding: 5px;">{{ item.user.email }}</td>
          </tr>
        {% endfor %}
        {% if queryset.count > 10 %}
          <tr>
            <td colspan="2" style="padding: 5px; text-align: center; font-style: italic;">... и еще {{ queryset.count|add:"-10" }} студентов</td>
          </tr>
        {% endif %}
      </tbody>
    </table>
  </div>

  <div style="display: flex; gap: 10px; margin-top: 20px;">
    <button type="submit" name="apply" class="button" style="background-color: #417690; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer;">
      Применить
    </button>
    <a href="{% admin_url opts %}" class="button" style="background-color: #6c757d; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; text-decoration: none; display: inline-block;">
      Отменить
    </a>
  </div>
</form>
{% endblock %}
