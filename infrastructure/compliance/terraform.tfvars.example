# =============================================================================
# Terraform Variables - Production Configuration Example
# =============================================================================
# Copy this file to terraform.tfvars and update with your values
# DO NOT COMMIT terraform.tfvars to version control (add to .gitignore)
#
# Usage: terraform apply -var-file="terraform.tfvars"
# =============================================================================

# =============================================================================
# AWS Configuration
# =============================================================================

aws_region   = "us-east-1"
environment  = "production"
organization_id = "o-xxxxxxxxxx"  # Your AWS Organization ID

# =============================================================================
# Compliance Controls
# =============================================================================

# CloudTrail Configuration
cloudtrail_enabled           = true
enable_log_file_validation   = true      # Enable SHA-256 hash chain
enable_gdpr_controls         = true      # Enable GDPR compliance controls
enable_soc2_monitoring       = true      # Enable SOC 2 Type II monitoring

# Key Management
kms_key_rotation_enabled     = true      # Automatic yearly rotation
mfa_delete_enabled           = true      # Require MFA for delete operations

# =============================================================================
# Retention Policies
# =============================================================================

# CloudWatch Logs retention (SOC 2 minimum: 90 days)
log_retention_days           = 90

# S3 audit logs retention (GDPR minimum: 90 days, recommend: 365)
audit_log_retention_days     = 365

# User data retention (7 years = 2555 days)
user_data_retention_days     = 2555

# Deleted user data retention (GDPR: max 30 days in identifiable form)
deleted_user_data_retention_days = 30

# Backup retention (recommend: 90 days minimum)
backup_retention_days        = 90

# Payment records retention (Tax requirement: 7 years)
payment_record_retention_days = 2555

# =============================================================================
# Notifications
# =============================================================================

# Primary notification email for compliance alerts
notification_email           = "security@thebot.com"

# Critical alerts escalation email
alert_critical_email         = "ciso@thebot.com"

# Slack integration for real-time alerts
slack_webhook_url            = ""  # Leave empty or set in CI/CD secrets
alert_slack_channel          = "#compliance-alerts"

# =============================================================================
# Feature Enablement
# =============================================================================

# Data event logging
enable_lambda_data_logging   = true     # Log Lambda invocations
enable_rds_audit_logging     = true     # Log database access
enable_s3_access_logging     = true     # Log S3 operations

# Network monitoring
enable_vpc_flow_logs         = true     # Monitor network traffic

# Compliance tools
enable_eventbridge_integration = true   # Advanced event routing
config_rules_enabled         = true     # Enable AWS Config rules
enable_security_hub          = true     # Centralized security findings
enable_guardduty              = true     # Threat detection
insight_events_enabled       = true     # CloudTrail Insights (anomaly detection)

# Compliance evidence
evidence_collection_enabled  = true     # Automatic SOC 2 evidence collection
evidence_collection_frequency = "monthly" # daily, weekly, monthly

# =============================================================================
# Compliance Frameworks
# =============================================================================

target_compliance_frameworks = [
  "GDPR",           # EU data protection
  "SOC2_TYPE_II",   # Trust Service Criteria
  "ISO_27001"       # Information security (optional)
]

audit_frequency              = "quarterly" # Compliance audit frequency

# =============================================================================
# Advanced Configuration
# =============================================================================

# Alarms and monitoring
cloudwatch_alarm_threshold   = 1        # Trigger alarm after 1 unauthorized call
create_compliance_dashboard  = true     # Create monitoring dashboard

# Threat protection
enable_advanced_threat_protection = false  # Advanced threat detection (high cost)

# Multi-account monitoring
multi_account_monitoring     = false    # Enable for organizational trail

# S3 Object Lock (WORM protection)
enable_object_lock           = true     # Write Once Read Many
object_lock_mode             = "GOVERNANCE"  # GOVERNANCE or COMPLIANCE
object_lock_retention_days   = 365      # Minimum 365 days for audit logs

# Cost optimization
enable_cost_optimization     = true
glacier_transition_days      = 30       # Move to Glacier after 30 days
glacier_deep_archive_days    = 90       # Move to Deep Archive after 90 days

# Encryption
log_encryption_algorithm     = "aws:kms" # AWS KMS encryption (recommended)

# Versioning
enable_bucket_versioning     = true     # Enable S3 versioning (recommended)

# =============================================================================
# Notifications
# =============================================================================

enable_sns_notifications     = true     # SNS for email alerts
enable_eventbridge_notifications = true # EventBridge for advanced routing

# =============================================================================
# Development Options
# =============================================================================

debug_mode                   = false    # Debug logging (dev only)
verbose_logging              = false    # Verbose logs (dev only)
enable_experimental_features = false    # Experimental features (not for prod)

# =============================================================================
# Tags
# =============================================================================

tags = {
  Project                   = "THE_BOT_Platform"
  Environment               = "production"
  Compliance                = "GDPR_SOC2_ISO27001"
  CostCenter               = "Engineering"
  DataClassification       = "Confidential"
  Owner                    = "Security Team"
  BackupRequired           = "true"
  DisasterRecovery         = "true"
  MonitoringRequired       = "true"
}

custom_tags = {
  Application              = "THE_BOT"
  Service                  = "Compliance"
  ManagedBy                = "Terraform"
  Team                     = "DevOps"
}

# =============================================================================
# Integration Configuration
# =============================================================================

integration_targets = {
  # splunk = "https://your-splunk-instance:8088/services/collector"
  # datadog = "https://http-intake.logs.datadoghq.com/v1/input"
  # jira = "https://your-company.atlassian.net/rest/api/3/issue"
}

# =============================================================================
# Notes for Implementation
# =============================================================================

# IMPORTANT:
# 1. Update notification_email with your actual email address
# 2. Set slack_webhook_url in CI/CD pipeline secrets (not in this file)
# 3. Update organization_id with your AWS Organization ID
# 4. Update custom_tags with your company information
# 5. Review retention periods based on your compliance requirements
# 6. Test in staging environment first before deploying to production
#
# SECURITY BEST PRACTICES:
# 1. Never commit terraform.tfvars to version control
# 2. Use CI/CD pipeline to manage secrets
# 3. Enable MFA for any sensitive operations
# 4. Review CloudTrail logs regularly
# 5. Test disaster recovery procedures quarterly
#
# COST OPTIMIZATION:
# 1. Use Glacier for logs older than 30 days
# 2. Enable lifecycle policies for automatic transitions
# 3. Monitor S3 storage usage in AWS Cost Explorer
# 4. Consider Deep Archive for logs older than 90 days
#
# COMPLIANCE:
# 1. Document all changes in CHANGELOG
# 2. Maintain audit trail of all deployments
# 3. Review compliance checklist quarterly
# 4. Schedule annual SOC 2 Type II audit
# 5. Test incident response procedures annually
