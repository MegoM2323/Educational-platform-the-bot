import{r as e,j as s}from"./react-core-JVqWokWt.js";import{u as a,C as t,J as l,K as r,Y as i,L as n,Z as c,_ as d,B as o,$ as m,f as x,l as h,c as u,E as j,O as p,Q as f,S as g,a0 as b,a as N,e as v,g as w,h as y,i as _,j as S,k,G as C,b as L,a1 as z,X as D,D as R,w as O,x as M,y as U}from"./main-fde3JC90.js";import{ad as E,X as T,aq as $,aS as F,ax as q,am as P,aF as I,ab as B,a7 as A,bw as G,aD as J,aE as V,au as X,at as K,av as Z,bx as Q,ap as Y,a0 as H,by as W,bz as ee}from"./vendor-DC2AZkDs.js";import{h as se}from"./fileDownload-DfJJnQoy.js";import"./react-dom-DyRXjBRd.js";import"./radix-ui-Ch8xfAyl.js";import"./react-query-DqnBFrGE.js";import"./react-router-WAeXREDX.js";import"./charts-CKrVAx-o.js";import"./d3-lib-BmB4v4DK.js";function ae({materialId:u,materialTitle:j,onSuccess:p,onCancel:f}){const{toast:g}=a(),[b,N]=e.useState(!1),[v,w]=e.useState({submission_text:""}),[y,_]=e.useState(null);return s.jsxs(t,{className:"w-full max-w-2xl mx-auto",children:[s.jsxs(l,{children:[s.jsxs(r,{className:"flex items-center gap-2",children:[s.jsx(E,{className:"w-5 h-5"}),"Отправить ответ"]}),s.jsxs(i,{children:["Отправка ответа на материал: ",s.jsx("strong",{children:j})]})]}),s.jsx(n,{children:s.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),y||v.submission_text.trim())try{N(!0);const e=new FormData;e.append("material_id",u.toString()),e.append("submission_text",v.submission_text),y&&e.append("submission_file",y);const s=await x.request("/submissions/submit_answer/",{method:"POST",data:e,headers:{"Content-Type":"multipart/form-data"}});if(!s.data)throw new Error(s.error||"Ошибка отправки ответа");g({title:"Успешно",description:"Ответ отправлен преподавателю"}),p()}catch(s){h.error("Submission error:",s),g({title:"Ошибка",description:s.message||"Произошла ошибка при отправке ответа",variant:"destructive"})}finally{N(!1)}else g({title:"Ошибка",description:"Необходимо предоставить либо файл, либо текстовый ответ",variant:"destructive"})},className:"space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(c,{htmlFor:"submission-file",children:"Файл ответа (необязательно)"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(d,{id:"submission-file",type:"file",onChange:e=>{var s,a;const t=null==(s=e.target.files)?void 0:s[0];if(t){const e=10485760;if(t.size>e)return void g({title:"Ошибка",description:"Размер файла не должен превышать 10MB",variant:"destructive"});const s=["pdf","doc","docx","txt","jpg","jpeg","png","zip","rar"],l=null==(a=t.name.split(".").pop())?void 0:a.toLowerCase();if(!l||!s.includes(l))return void g({title:"Ошибка",description:`Неподдерживаемый тип файла. Разрешены: ${s.join(", ")}`,variant:"destructive"});_(t)}},accept:".pdf,.doc,.docx,.txt,.jpg,.jpeg,.png,.zip,.rar",className:"flex-1"}),y&&s.jsx(o,{type:"button",variant:"outline",size:"sm",onClick:()=>{_(null);const e=document.getElementById("submission-file");e&&(e.value="")},children:s.jsx(T,{className:"w-4 h-4"})})]}),y&&s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsx($,{className:"w-4 h-4"}),s.jsx("span",{children:y.name}),s.jsxs("span",{children:["(",(y.size/1024/1024).toFixed(2)," MB)"]})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Максимальный размер файла: 10MB. Поддерживаемые форматы: PDF, DOC, DOCX, TXT, JPG, PNG, ZIP, RAR"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(c,{htmlFor:"submission-text",children:"Текстовый ответ (необязательно)"}),s.jsx(m,{id:"submission-text",placeholder:"Введите ваш ответ на материал...",value:v.submission_text,onChange:e=>{w(s=>({...s,submission_text:e.target.value}))},rows:6,className:"resize-none"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Вы можете предоставить либо файл, либо текстовый ответ, либо и то, и другое"})]}),s.jsxs("div",{className:"flex gap-3 justify-end",children:[s.jsx(o,{type:"button",variant:"outline",onClick:f,disabled:b,children:"Отмена"}),s.jsx(o,{type:"submit",disabled:b||!y&&!v.submission_text.trim(),children:b?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Отправка..."]}):s.jsxs(s.Fragment,{children:[s.jsx(E,{className:"w-4 h-4 mr-2"}),"Отправить ответ"]})})]})]})})]})}const te={submitted:{label:"Отправлено",icon:I,variant:"secondary",color:"text-blue-600"},reviewed:{label:"Проверено",icon:P,variant:"default",color:"text-green-600"},returned:{label:"Возвращено",icon:q,variant:"destructive",color:"text-orange-600"}};function le({materialId:c,materialTitle:d,onEditSubmission:m}){const{toast:p}=a(),[f,g]=e.useState(null),[b,N]=e.useState(!0),[v,w]=e.useState(null),y=async()=>{try{N(!0),w(null);const e=await x.request(`/submissions/?material=${c}`);e.data&&e.data.length>0?g(e.data[0]):g(null)}catch(e){h.error("Fetch submission error:",e),w("Ошибка загрузки статуса ответа")}finally{N(!1)}};e.useEffect(()=>{y()},[c]);if(b)return s.jsx(t,{children:s.jsx(n,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-center",children:[s.jsx("div",{className:"w-6 h-6 border-2 border-primary border-t-transparent rounded-full animate-spin"}),s.jsx("span",{className:"ml-2",children:"Загрузка статуса ответа..."})]})})});if(v)return s.jsx(t,{children:s.jsx(n,{className:"p-6",children:s.jsxs("div",{className:"text-center text-red-600",children:[s.jsx("p",{children:v}),s.jsx(o,{type:"button",variant:"outline",size:"sm",onClick:y,className:"mt-2",children:"Попробовать снова"})]})})});if(!f)return s.jsx(t,{children:s.jsx(n,{className:"p-6",children:s.jsxs("div",{className:"text-center text-muted-foreground",children:[s.jsx(F,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"Ответ не отправлен"}),s.jsx("p",{className:"text-sm",children:"Отправьте ответ на материал, чтобы увидеть его статус"})]})})});const _=te[f.status],S=_.icon;return s.jsxs(t,{children:[s.jsx(l,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs(r,{className:"flex items-center gap-2",children:[s.jsx(S,{className:`w-5 h-5 ${_.color}`}),"Статус ответа"]}),s.jsxs(i,{children:["Ответ на материал: ",s.jsx("strong",{children:f.material_title})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(u,{variant:_.variant,children:_.label}),f.is_late&&s.jsx(u,{variant:"outline",className:"text-orange-600",children:"С опозданием"})]})]})}),s.jsxs(n,{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsx(B,{className:"w-4 h-4"}),s.jsxs("span",{children:["Отправлено: ",new Date(f.submitted_at).toLocaleString("ru-RU")]})]}),f.submission_text&&s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium mb-2",children:"Текстовый ответ:"}),s.jsx("div",{className:"bg-muted p-3 rounded-lg",children:s.jsx("p",{className:"whitespace-pre-wrap",children:f.submission_text})})]}),f.submission_file&&s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium mb-2",children:"Файл ответа:"}),s.jsxs("div",{className:"flex items-center gap-2 p-3 bg-muted rounded-lg",children:[s.jsx($,{className:"w-4 h-4"}),s.jsx("span",{className:"flex-1",children:f.submission_file.split("/").pop()}),s.jsxs(o,{type:"button",size:"sm",variant:"outline",onClick:()=>(async(e,s)=>{try{const a=await fetch(e,{headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`}});if(!a.ok)throw new Error("Ошибка скачивания файла");const t=await a.blob(),l=window.URL.createObjectURL(t),r=document.createElement("a");r.href=l,r.download=s,document.body.appendChild(r),r.click(),window.URL.revokeObjectURL(l),document.body.removeChild(r),p({title:"Успешно",description:"Файл скачан"})}catch(a){p({title:"Ошибка",description:"Ошибка при скачивании файла",variant:"destructive"})}})(f.submission_file,f.submission_file.split("/").pop()),children:[s.jsx(A,{className:"w-4 h-4 mr-1"}),"Скачать"]})]})]}),f.feedback&&s.jsxs(s.Fragment,{children:[s.jsx(j,{}),s.jsxs("div",{children:[s.jsxs("h4",{className:"font-medium mb-2 flex items-center gap-2",children:[s.jsx(F,{className:"w-4 h-4"}),"Фидбэк преподавателя"]}),s.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm font-medium",children:f.feedback.teacher_name}),f.feedback.grade&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(G,{className:"w-4 h-4 text-yellow-500 fill-current"}),s.jsxs("span",{className:"font-medium",children:[f.feedback.grade,"/5"]})]})]}),s.jsx("p",{className:"text-sm whitespace-pre-wrap",children:f.feedback.feedback_text}),s.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:new Date(f.feedback.created_at).toLocaleString("ru-RU")})]})]})]}),"returned"===f.status&&m&&s.jsx("div",{className:"pt-4",children:s.jsxs(o,{type:"button",onClick:m,className:"w-full",children:[s.jsx(q,{className:"w-4 h-4 mr-2"}),"Отправить исправленный ответ"]})})]})]})}const re={lesson:Y,presentation:ee,video:Q,document:$,test:W,homework:H},ie={lesson:"Урок",presentation:"Презентация",video:"Видео",document:"Документ",test:"Тест",homework:"Домашнее задание"};function ne(){a();const l=p(),r=f(),[i,n]=e.useState([]),[c,m]=e.useState([]),[j,T]=e.useState(!0),[q,P]=e.useState(null),[G,H]=e.useState(""),[W,ee]=e.useState("all"),[te,ne]=e.useState("all"),[ce,de]=e.useState("all"),[oe,me]=e.useState(!1),[xe,he]=e.useState(!1),[ue,je]=e.useState(null),[pe,fe]=e.useState([]),[ge,be]=e.useState(!1),[Ne,ve]=e.useState(null),[we,ye]=e.useState(!1),_e=async()=>{try{T(!0),P(null);const e=new URLSearchParams;"all"!==W&&e.append("subject_id",W),"all"!==te&&e.append("type",te),"all"!==ce&&e.append("difficulty",ce);const s=await x.request(`/materials/student/?${e.toString()}`);if(s.data){const e=s.data.materials_by_subject||{},a=[];for(const s of Object.values(e)){const e=s.materials||[];a.push(...e)}n(a)}else{const e=s.error||"Ошибка загрузки материалов";P(e),l(e)}}catch(e){const s="Произошла ошибка при загрузке материалов";P(s),l(s),h.error("Materials fetch error:",e)}finally{T(!1)}};e.useEffect(()=>{_e(),(async()=>{try{const e=await x.request("/materials/subjects/");e.data&&m(e.data)}catch(e){h.error("Subjects fetch error:",e)}})(),(async()=>{try{be(!0);const e=new URLSearchParams;"all"!==W&&e.append("subject_id",W),e.append("_",Date.now().toString());const s=await x.request(`/student/study-plans/?${e.toString()}`);s.data&&fe(s.data.study_plans||[])}catch(e){h.error("Study plans fetch error:",e)}finally{be(!1)}})()},[W,te,ce]);const Se=i.filter(e=>e.title.toLowerCase().includes(G.toLowerCase())||e.description.toLowerCase().includes(G.toLowerCase())||e.subject_name.toLowerCase().includes(G.toLowerCase())||e.author_name.toLowerCase().includes(G.toLowerCase())),ke=e=>{const a=re[e]||Y;return s.jsx(a,{className:"w-5 h-5"})},Ce=e=>{je(e),me(!0)};return s.jsx(g,{children:s.jsxs("div",{className:"flex min-h-screen w-full",children:[s.jsx(b,{}),s.jsxs(N,{children:[s.jsxs("header",{className:"sticky top-0 z-10 flex h-16 items-center gap-4 border-b bg-background px-6",children:[s.jsx(v,{}),s.jsx("button",{"aria-label":"Toggle Sidebar",className:"rounded border px-2 py-1 text-xs",children:"Меню"}),s.jsx("div",{className:"flex-1"})]}),s.jsx("main",{className:"p-6",children:s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Учебные материалы"}),s.jsx("p",{className:"text-muted-foreground",children:"Все материалы от ваших преподавателей"})]})}),pe.length>0&&s.jsxs(t,{className:"p-6",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(B,{className:"w-5 h-5 text-primary"}),s.jsx("h2",{className:"text-xl font-bold",children:"Планы занятий"})]}),s.jsx("div",{className:"grid gap-4",children:pe.map(e=>s.jsx(t,{className:"p-4 border-l-4",style:{borderLeftColor:e.subject_color},children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(u,{style:{backgroundColor:e.subject_color},className:"text-white",children:e.subject_name}),s.jsxs("span",{className:"text-sm text-muted-foreground",children:[J(new Date(e.week_start_date),"dd.MM.yyyy",{locale:V})," - ",J(new Date(e.week_end_date),"dd.MM.yyyy",{locale:V})]})]}),s.jsx("h3",{className:"text-lg font-semibold mb-2",children:e.title}),s.jsx("p",{className:"text-muted-foreground line-clamp-2",children:e.content}),e.files&&e.files.length>0&&s.jsxs("div",{className:"flex items-center gap-2 mt-2 text-sm text-muted-foreground",children:[s.jsx($,{className:"w-4 h-4"}),s.jsxs("span",{children:["Прикреплено файлов: ",e.files.length]})]})]}),s.jsxs(o,{type:"button",variant:"outline",size:"sm",onClick:async()=>{try{const s=await x.request(`/student/study-plans/${e.id}/`);s.data?(ve(s.data),ye(!0)):l("Ошибка при загрузке деталей плана")}catch(s){l("Произошла ошибка при загрузке деталей плана"),h.error("Load plan details error:",s)}},className:"ml-4",children:[s.jsx(X,{className:"w-4 h-4 mr-2"}),"Просмотр"]})]})},e.id))})]}),s.jsx(t,{className:"p-4",children:s.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(K,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(d,{placeholder:"Поиск материалов...",className:"pl-10",value:G,onChange:e=>H(e.target.value)})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(w,{value:W,onValueChange:ee,children:[s.jsx(y,{className:"w-40",children:s.jsx(_,{placeholder:"Предмет"})}),s.jsxs(S,{children:[s.jsx(k,{value:"all",children:"Все предметы"}),Array.isArray(c)&&c.map(e=>s.jsx(k,{value:e.id.toString(),children:e.name},e.id))]})]}),s.jsxs(w,{value:te,onValueChange:ne,children:[s.jsx(y,{className:"w-40",children:s.jsx(_,{placeholder:"Тип"})}),s.jsxs(S,{children:[s.jsx(k,{value:"all",children:"Все типы"}),Object.entries(ie).map(([e,a])=>s.jsx(k,{value:e,children:a},e))]})]}),s.jsxs(w,{value:ce,onValueChange:de,children:[s.jsx(y,{className:"w-40",children:s.jsx(_,{placeholder:"Сложность"})}),s.jsxs(S,{children:[s.jsx(k,{value:"all",children:"Все уровни"}),[1,2,3,4,5].map(e=>s.jsxs(k,{value:e.toString(),children:["Уровень ",e]},e))]})]})]})]})}),q&&s.jsx(C,{error:q,onRetry:_e}),j&&s.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:[...Array(4)].map((e,a)=>s.jsx(t,{className:"p-6",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx(L,{className:"w-12 h-12 rounded-lg"}),s.jsxs("div",{className:"flex-1 space-y-2",children:[s.jsx(L,{className:"h-4 w-3/4"}),s.jsx(L,{className:"h-3 w-1/2"}),s.jsx(L,{className:"h-3 w-full"}),s.jsx(L,{className:"h-8 w-24"})]})]})},`material-skeleton-${a}`))}),!j&&!q&&s.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:Se.map(e=>{var a,i,c;return s.jsx(t,{className:"p-6 hover:border-primary transition-colors",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"w-12 h-12 gradient-primary rounded-lg flex items-center justify-center flex-shrink-0",children:ke(e.type)}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-start justify-between mb-2",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold mb-1",children:e.title}),s.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[s.jsx(Z,{className:"w-3 h-3"}),e.author_name]})]}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx(u,{variant:(null==(a=e.progress)?void 0:a.is_completed)?"default":"secondary",children:(null==(i=e.progress)?void 0:i.is_completed)?"Завершено":"В процессе"}),s.jsxs(u,{className:(c=e.difficulty_level,c<=2?"bg-green-100 text-green-800":c<=3?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:["Уровень ",e.difficulty_level]})]})]}),s.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:e.description}),s.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground mb-3",children:[s.jsx("span",{className:"font-medium",children:e.subject_name}),s.jsx("span",{children:"•"}),s.jsxs("span",{className:"flex items-center gap-1",children:[ke(e.type),ie[e.type]]}),s.jsx("span",{children:"•"}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(I,{className:"w-3 h-3"}),new Date(e.created_at).toLocaleDateString("ru-RU")]})]}),e.progress&&s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mb-1",children:[s.jsx("span",{children:"Прогресс изучения"}),s.jsxs("span",{children:[e.progress.progress_percentage,"%"]})]}),s.jsx(z,{value:e.progress.progress_percentage,className:"h-2"}),e.progress.time_spent>0&&s.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Время изучения: ",e.progress.time_spent," мин"]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(o,{type:"button",size:"sm",className:"flex-1",onClick:()=>{var s;return(async(e,s)=>{try{await x.request(`/materials/${e}/progress/`,{method:"POST",body:JSON.stringify({progress_percentage:s,time_spent:1})}),n(a=>a.map(a=>{var t;return a.id===e?{...a,progress:{...a.progress,progress_percentage:s,is_completed:s>=100,time_spent:((null==(t=a.progress)?void 0:t.time_spent)||0)+1}}:a}))}catch(a){h.error("Progress update error:",a)}})(e.id,Math.min(((null==(s=e.progress)?void 0:s.progress_percentage)||0)+25,100))},children:[s.jsx(X,{className:"w-4 h-4 mr-2"}),"Изучить"]}),s.jsxs(o,{type:"button",size:"sm",variant:"outline",onClick:()=>Ce(e),children:[s.jsx(E,{className:"w-4 h-4 mr-1"}),"Ответить"]}),s.jsx(o,{type:"button",size:"sm",variant:"outline",onClick:()=>(e=>{je(e),he(!0)})(e),children:s.jsx(F,{className:"w-4 h-4"})}),e.file&&s.jsx(o,{type:"button",size:"sm",variant:"outline",onClick:()=>(async e=>{try{if(!e.file)return void l("Файл не найден");const s=await fetch(`/api/materials/${e.id}/download/`,{headers:{Authorization:`Token ${localStorage.getItem("authToken")||""}`}});if(!s.ok)throw new Error("Ошибка скачивания файла");const a=await s.blob(),t=window.URL.createObjectURL(a),i=document.createElement("a");i.href=t,i.download=e.file.split("/").pop()||"material",document.body.appendChild(i),i.click(),window.URL.revokeObjectURL(t),document.body.removeChild(i),r("Файл успешно скачан")}catch(s){l("Ошибка при скачивании файла"),h.error("Download error:",s)}})(e),children:s.jsx(A,{className:"w-4 h-4"})}),e.video_url&&s.jsx(o,{type:"button",size:"sm",variant:"outline",onClick:()=>window.open(e.video_url,"_blank"),children:s.jsx(Q,{className:"w-4 h-4"})})]})]})]})},e.id)})}),!j&&!q&&0===Se.length&&s.jsx(D,{title:"Материалы не найдены",description:G||"all"!==W||"all"!==te||"all"!==ce?"Попробуйте изменить фильтры поиска":"Пока нет доступных материалов. Обратитесь к преподавателю.",icon:s.jsx(Y,{className:"w-8 h-8 text-muted-foreground"})}),s.jsx(R,{open:oe,onOpenChange:me,children:s.jsxs(O,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsx(M,{children:s.jsx(U,{children:"Отправить ответ на материал"})}),ue&&s.jsx(ae,{materialId:ue.id,materialTitle:ue.title,onSuccess:()=>{me(!1),je(null),_e()},onCancel:()=>{me(!1),je(null)}})]})}),s.jsx(R,{open:xe,onOpenChange:he,children:s.jsxs(O,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsx(M,{children:s.jsx(U,{children:"Статус ответа"})}),ue&&s.jsx(le,{materialId:ue.id,materialTitle:ue.title,onEditSubmission:()=>{he(!1),Ce(ue)}})]})}),s.jsx(R,{open:we,onOpenChange:ye,children:s.jsxs(O,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[s.jsx(M,{children:s.jsx(U,{children:null==Ne?void 0:Ne.title})}),Ne&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(u,{style:{backgroundColor:Ne.subject_color},className:"text-white",children:Ne.subject_name}),s.jsxs("span",{className:"text-sm text-muted-foreground",children:[J(new Date(Ne.week_start_date),"dd.MM.yyyy",{locale:V})," - ",J(new Date(Ne.week_end_date),"dd.MM.yyyy",{locale:V})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold mb-2",children:"Содержание плана"}),s.jsx("div",{className:"p-4 bg-muted rounded-md whitespace-pre-wrap",children:Ne.content})]}),Ne.files&&Ne.files.length>0&&s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold mb-2",children:"Прикрепленные файлы"}),s.jsx("div",{className:"space-y-2",children:Ne.files.map(e=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted rounded-md",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[s.jsx($,{className:"w-4 h-4 text-muted-foreground"}),s.jsx("a",{href:e.file_url,target:"_blank",rel:"noopener noreferrer",className:"text-sm font-medium hover:underline flex-1",onClick:s=>se(s,e.file_url,e.name),children:e.name}),s.jsxs("span",{className:"text-xs text-muted-foreground",children:[(e.file_size/1024).toFixed(2)," KB"]})]}),s.jsxs(o,{type:"button",variant:"outline",size:"sm",onClick:s=>{e.file_url&&se(s,e.file_url,e.name)},children:[s.jsx(A,{className:"w-4 h-4 mr-2"}),"Скачать"]})]},e.id))})]})]})]})})]})})]})]})})}export{ne as default};
