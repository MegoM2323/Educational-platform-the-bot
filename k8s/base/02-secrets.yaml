---
# Secrets for application credentials (base64 encoded in production)
# NOTE: In production, use external secret management (sealed-secrets, vault, external-secrets-operator)
# These are OVERRIDDEN by External Secrets Operator (see k8s/base/12-external-secrets.yaml)
# DO NOT commit actual secrets here - use Vault for production
apiVersion: v1
kind: Secret
metadata:
  name: django-secrets
  namespace: thebot
  labels:
    app: backend
    managed-by: external-secrets-operator
  annotations:
    external-secrets.io/managed: "true"
    vault.hashicorp.com/agent-inject: "false"
    description: "Secrets managed by External Secrets Operator from Vault"
type: Opaque
stringData:
  # Django Secret Key - MUST be changed in production
  # This will be overridden by External Secrets Operator
  SECRET_KEY: "CHANGE-ME-IN-PRODUCTION-LONG-RANDOM-STRING-MIN-50-CHARS"

  # Database credentials
  DB_USER: "postgres"
  DB_PASSWORD: "CHANGE-ME-STRONG-DB-PASSWORD"

  # Redis credentials
  REDIS_PASSWORD: "CHANGE-ME-STRONG-REDIS-PASSWORD"

  # External API Keys
  YOOKASSA_SHOP_ID: "1168002"
  YOOKASSA_SECRET_KEY: "CHANGE-ME-YOOKASSA-SECRET"
  YOOKASSA_WEBHOOK_URL: "https://api.the-bot.ru/yookassa-webhook"

  OPENROUTER_API_KEY: "CHANGE-ME-OPENROUTER-KEY"
  PACHCA_FORUM_API_TOKEN: "CHANGE-ME-PACHCA-TOKEN"
  TELEGRAM_BOT_TOKEN: "CHANGE-ME-TELEGRAM-TOKEN"
  TELEGRAM_LOG_CHAT_ID: "-1003138593404"

  # Email configuration
  EMAIL_HOST: "smtp.gmail.com"
  EMAIL_PORT: "587"
  EMAIL_HOST_USER: "CHANGE-ME-EMAIL@gmail.com"
  EMAIL_HOST_PASSWORD: "CHANGE-ME-EMAIL-PASSWORD"
  EMAIL_USE_TLS: "True"

  # JWT/Authentication
  JWT_SECRET_KEY: "CHANGE-ME-JWT-SECRET-KEY"
  JWT_ALGORITHM: "HS256"
  JWT_EXPIRATION_MINUTES: "1440"
  JWT_REFRESH_EXPIRATION_DAYS: "7"

---
# Secrets for PostgreSQL
apiVersion: v1
kind: Secret
metadata:
  name: postgres-secrets
  namespace: thebot
  labels:
    app: postgres
    managed-by: external-secrets-operator
  annotations:
    external-secrets.io/managed: "true"
    description: "PostgreSQL credentials managed by External Secrets Operator"
type: Opaque
stringData:
  POSTGRES_DB: "thebot_db"
  POSTGRES_USER: "postgres"
  POSTGRES_PASSWORD: "CHANGE-ME-STRONG-DB-PASSWORD"
  POSTGRES_INITDB_ARGS: "--encoding=UTF8"

---
# Secrets for Redis
apiVersion: v1
kind: Secret
metadata:
  name: redis-secrets
  namespace: thebot
  labels:
    app: redis
    managed-by: external-secrets-operator
  annotations:
    external-secrets.io/managed: "true"
    description: "Redis credentials managed by External Secrets Operator"
type: Opaque
stringData:
  REDIS_PASSWORD: "CHANGE-ME-STRONG-REDIS-PASSWORD"

---
# Docker registry credentials (if using private registry)
# Can be managed by External Secrets Operator
apiVersion: v1
kind: Secret
metadata:
  name: docker-registry
  namespace: thebot
  labels:
    app: docker
    managed-by: external-secrets-operator
  annotations:
    external-secrets.io/managed: "true"
    description: "Docker registry credentials managed by External Secrets Operator"
type: kubernetes.io/dockercfg
data:
  .dockercfg: eyJsb2NhbGhvc3Q6NTAwMCI6eyJhdXRoIjoiZEhObGNIbHdjRzl1YldWdVkyOVU6ZEdWemRIQmxjSFY1YldFMWRIUjU6VTNSaGRHVmZhV1EzT0RJME9ERXlNakU9In19

---
# TLS certificate for HTTPS
# Managed by cert-manager (external) - NOT by External Secrets Operator
# cert-manager automatically renews certificates from Let's Encrypt
apiVersion: v1
kind: Secret
metadata:
  name: tls-certificates
  namespace: thebot
  labels:
    app: ingress
  annotations:
    cert-manager.io/issue-temporary-certificate: "true"
    description: "TLS certificates managed by cert-manager (not vault)"
type: kubernetes.io/tls
stringData:
  tls.crt: |
    -----BEGIN CERTIFICATE-----
    # Your TLS certificate here
    # Use cert-manager for automatic certificate generation
    # See: https://cert-manager.io/docs/
    -----END CERTIFICATE-----
  tls.key: |
    -----BEGIN PRIVATE KEY-----
    # Your TLS private key here
    # cert-manager automatically manages renewal
    -----END PRIVATE KEY-----

---
# SSH Keys for Git integration (if needed)
# Can be populated by External Secrets Operator from Vault
apiVersion: v1
kind: Secret
metadata:
  name: ssh-keys
  namespace: thebot
  labels:
    app: git
    managed-by: external-secrets-operator
  annotations:
    external-secrets.io/managed: "true"
    description: "SSH keys managed by External Secrets Operator from Vault"
type: kubernetes.io/ssh-auth
stringData:
  ssh-privatekey: |
    # Your SSH private key for Git here
    # Will be populated from Vault
  known_hosts: |
    # Will be populated from Vault
    github.com ssh-rsa AAAAB3...

---
# Basic Auth Secret for internal services
# Can be managed by External Secrets Operator
apiVersion: v1
kind: Secret
metadata:
  name: basic-auth
  namespace: thebot
  labels:
    app: auth
    managed-by: external-secrets-operator
  annotations:
    external-secrets.io/managed: "true"
    description: "Basic authentication credentials"
type: kubernetes.io/basic-auth
stringData:
  username: "admin"
  password: "CHANGE-ME-BASIC-AUTH-PASSWORD"

---
# Opaque Secret for miscellaneous credentials
apiVersion: v1
kind: Secret
metadata:
  name: misc-secrets
  namespace: thebot
  labels:
    app: backend
    managed-by: external-secrets-operator
  annotations:
    external-secrets.io/managed: "true"
    description: "Miscellaneous secrets managed by External Secrets Operator"
type: Opaque
stringData:
  # Add any additional secrets here
  SENTRY_DSN: "https://xxxxx@sentry.io/xxxxx"
  SLACK_WEBHOOK_URL: "https://hooks.slack.com/services/T00000000/B00000000/XXXXXXXXXXXXXXXXXXXXXXXX"
