# ============================================================================
# TEST ENVIRONMENT CONFIGURATION
# ============================================================================
#
# КРИТИЧЕСКАЯ НАСТРОЙКА: Тестовое окружение с полной изоляцией от продакшн БД
# База данных: SQLite in-memory (:memory:)
# ЗАЩИТА: Продакшн БД (Supabase) ПОЛНОСТЬЮ НЕДОСТУПНА в этом режиме
#
# ============================================================================

ENVIRONMENT=test
DEBUG=True
SECRET_KEY=test-secret-key-for-tests-only-do-not-use-in-production-min-50-chars

# ============================================================================
# DATABASE CONFIGURATION (Test Mode)
# ============================================================================
#
# АВТОМАТИЧЕСКИ ИСПОЛЬЗУЕТСЯ: SQLite in-memory (:memory:)
# НЕ НУЖНО ничего настраивать для БД!
#
# ЗАЩИТА: Если обнаружен DATABASE_URL с Supabase - приложение упадет с ошибкой
# Это защищает продакшн данные от случайного уничтожения тестами
#
# ============================================================================

# NO Supabase connection in test mode!
# DATABASE_URL - должен быть закомментирован или удален

# ============================================================================
# PAYMENT SETTINGS (Test Mode)
# ============================================================================

PAYMENT_DEVELOPMENT_MODE=True
DEVELOPMENT_PAYMENT_AMOUNT=1.00
DEVELOPMENT_RECURRING_INTERVAL_MINUTES=10

# YooKassa (мокируется в тестах, не используется реально)
YOOKASSA_SHOP_ID=test_shop_id
YOOKASSA_SECRET_KEY=test_secret_key
YOOKASSA_WEBHOOK_URL=http://localhost:8000/yookassa-webhook/

# ============================================================================
# SUPABASE SETTINGS (мокируется в тестах)
# ============================================================================

SUPABASE_URL=http://localhost:54321
SUPABASE_KEY=test_supabase_anon_key
SUPABASE_SERVICE_ROLE_KEY=test_supabase_service_role_key

# ============================================================================
# TELEGRAM SETTINGS (мокируется в тестах)
# ============================================================================

TELEGRAM_BOT_TOKEN=test_telegram_bot_token
TELEGRAM_PUBLIC_CHAT_ID=-1001
TELEGRAM_LOG_CHAT_ID=-1002

# ============================================================================
# REDIS SETTINGS (опционально в тестах)
# ============================================================================

# В тестах Redis не требуется (используется in-memory)
USE_REDIS_CACHE=False
USE_REDIS_CHANNELS=False

# REDIS_URL - не используется в тестах

# ============================================================================
# FRONTEND SETTINGS (тестовые)
# ============================================================================

FRONTEND_URL=http://localhost:8080
VITE_DJANGO_API_URL=http://localhost:8000/api

# ============================================================================
# CELERY SETTINGS (тестовые, eager mode)
# ============================================================================

# В тестах Celery работает в eager режиме (задачи выполняются синхронно)
CELERY_ALWAYS_EAGER=True
