import{r as e,j as s}from"./react-core-JVqWokWt.js";import{u as t,S as a,a0 as r,a as l,b as c,C as d,c as i,a2 as m,l as n}from"./main-fde3JC90.js";import{ap as x,av as o,ab as j}from"./vendor-DC2AZkDs.js";import"./react-dom-DyRXjBRd.js";import"./radix-ui-Ch8xfAyl.js";import"./react-query-DqnBFrGE.js";import"./react-router-WAeXREDX.js";import"./charts-CKrVAx-o.js";import"./d3-lib-BmB4v4DK.js";const h=()=>{const{toast:h}=t(),[u,f]=e.useState([]),[p,g]=e.useState(!0);return e.useEffect(()=>{(async()=>{try{g(!0);const e=await m.getSubjects();f(e)}catch(e){n.error("Error fetching subjects:",e),h({title:"Ошибка загрузки",description:e.message||"Не удалось загрузить предметы",variant:"destructive"})}finally{g(!1)}})()},[h]),p?s.jsxs(a,{children:[s.jsx(r,{}),s.jsx(l,{children:s.jsxs("div",{className:"flex flex-col gap-4 p-6",children:[s.jsx(c,{className:"h-12 w-full"}),s.jsx(c,{className:"h-64 w-full"}),s.jsx(c,{className:"h-64 w-full"})]})})]}):s.jsxs(a,{children:[s.jsx(r,{}),s.jsx(l,{children:s.jsxs("div",{className:"flex flex-col gap-6 p-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Мои предметы"}),s.jsx("p",{className:"text-muted-foreground",children:"Предметы, назначенные вам преподавателями"})]}),0===u.length?s.jsxs(d,{className:"p-12 text-center",children:[s.jsx(x,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Нет назначенных предметов"}),s.jsx("p",{className:"text-muted-foreground",children:"Вам еще не назначены предметы. Обратитесь к преподавателю."})]}):s.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:u.map(e=>s.jsxs(d,{className:"p-6",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:e.subject.color}}),s.jsx("h3",{className:"text-lg font-semibold",children:e.subject.name})]}),e.is_active?s.jsx(i,{variant:"default",children:"Активен"}):s.jsx(i,{variant:"secondary",children:"Неактивен"})]}),e.subject.description&&s.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:e.subject.description}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(o,{className:"h-4 w-4 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium",children:"Преподаватель"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:e.teacher.name})]})]}),e.assigned_by&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(o,{className:"h-4 w-4 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium",children:"Назначено"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:e.assigned_by.name})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(j,{className:"h-4 w-4 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium",children:"Дата назначения"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:new Date(e.enrolled_at).toLocaleDateString("ru-RU")})]})]})]})]},e.enrollment_id))})]})})]})};export{h as default};
