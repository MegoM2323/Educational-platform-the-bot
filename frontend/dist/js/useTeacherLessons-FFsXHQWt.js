import{u as e,a as s,b as r}from"./react-query-DqnBFrGE.js";import{aG as a,l as t}from"./main-fde3JC90.js";import{a2 as o}from"./vendor-DC2AZkDs.js";const n=n=>{const c=e(),i=s({queryKey:["lessons","teacher",n],queryFn:()=>a.getLessons(n)}),u=r({mutationFn:e=>a.createLesson(e),onSuccess:async()=>{await c.invalidateQueries({queryKey:["lessons","teacher"],exact:!1}),await c.refetchQueries({queryKey:["lessons","teacher"],type:"active",exact:!1}),o.success("Урок успешно создан")},onError:e=>{const s=e.message||"Ошибка при создании урока";o.error(s),t.error("Create lesson error:",e)}}),l=r({mutationFn:({id:e,payload:s})=>(t.info("[useTeacherLessons] Updating lesson",{id:e,payload:s}),a.updateLesson(e,s)),onSuccess:async e=>{t.info("[useTeacherLessons] Update success, returned data:",e),await c.invalidateQueries({queryKey:["lessons","teacher"],exact:!1,refetchType:"all"}),t.info("[useTeacherLessons] Invalidation complete"),await c.refetchQueries({queryKey:["lessons","teacher"],type:"active",exact:!1}),t.info("[useTeacherLessons] Refetch complete"),o.success("Урок успешно обновлён")},onError:e=>{t.error("[useTeacherLessons] Update error:",e);const s=e.message||"Ошибка при обновлении урока";o.error(s),t.error("Update lesson error:",e)}}),y=r({mutationFn:e=>a.deleteLesson(e),onSuccess:async()=>{await c.invalidateQueries({queryKey:["lessons","teacher"],exact:!1}),await c.refetchQueries({queryKey:["lessons","teacher"],type:"active",exact:!1}),o.success("Урок успешно удалён")},onError:e=>{const s=e.message||"Ошибка при удалении урока";o.error(s),t.error("Delete lesson error:",e)}});return{lessons:i.data||[],isLoading:i.isLoading,error:i.error,createLesson:u.mutateAsync,updateLesson:l.mutateAsync,deleteLesson:y.mutate,isCreating:u.isPending,isUpdating:l.isPending,isDeleting:y.isPending}};export{n as u};
