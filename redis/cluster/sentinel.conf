# Redis Sentinel Configuration
# Sentinel monitors Redis cluster and performs automatic failover

################################## NETWORK #####################################

port 26379
bind 0.0.0.0
protected-mode yes

################################# GENERAL #######################################

daemonize no
pidfile /var/run/redis-sentinel.pid

# Log file
logfile ""
loglevel notice

################################## SENTINEL ####################################

# Master node monitoring configuration
# Format: sentinel monitor <master-name> <ip> <port> <quorum>
# quorum = minimum sentinels needed to agree on failover

# Monitor cluster master nodes
sentinel monitor master1 127.0.0.1 6379 2
sentinel monitor master2 127.0.0.1 6380 2
sentinel monitor master3 127.0.0.1 6381 2

# Master down detection (milliseconds)
# If no response for this time, consider master down
# Default: 30000ms (30 seconds)
sentinel down-after-milliseconds master1 5000
sentinel down-after-milliseconds master2 5000
sentinel down-after-milliseconds master3 5000

# Failover timeout (milliseconds)
# Maximum time to perform failover
sentinel failover-timeout master1 15000
sentinel failover-timeout master2 15000
sentinel failover-timeout master3 15000

# Number of replicas to reconfigure after failover
# Send SLAVEOF command to this many replicas
sentinel parallel-syncs master1 1
sentinel parallel-syncs master2 1
sentinel parallel-syncs master3 1

################################ SENTINEL NOTIFICATION ##########################

# Notification scripts (optional)
# Scripts to execute when events occur

# Script executed when master is down and failover starts
# sentinel notification-script <name> <path-to-script>

# Script executed after failover
# sentinel client-reconfig-script <name> <path-to-script>

################################## CLUSTER TOPOLOGY ############################

# Sentinel connects to all masters and their replicas
# Configuration is auto-generated after first run
# Do not manually configure replica connections

################################ ACL #########################################

# Sentinel ACL (optional)
# requirepass ""

################################ PERSISTENCE #####################################

# Sentinel configuration persistence
# Saved automatically after updates
logfile /var/log/redis/sentinel.log
