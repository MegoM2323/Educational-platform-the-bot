import{a as e}from"./migration-O34B3Isr.js";const t={getElements:async t=>{const a=new URLSearchParams;(null==t?void 0:t.type)&&a.append("type",t.type),(null==t?void 0:t.created_by)&&a.append("created_by",t.created_by),(null==t?void 0:t.search)&&a.append("search",t.search),(null==t?void 0:t.page)&&a.append("page",t.page.toString());return(await e.get(`/knowledge-graph/elements/?${a.toString()}`)).data},getElement:async t=>(await e.get(`/knowledge-graph/elements/${t}/`)).data,createElement:async t=>(await e.post("/knowledge-graph/elements/",t)).data,updateElement:async(t,a)=>(await e.patch(`/knowledge-graph/elements/${t}/`,a)).data,deleteElement:async t=>{await e.delete(`/knowledge-graph/elements/${t}/`)},copyElement:async e=>{const a=await t.getElement(e),n={...a.data,title:`${a.data.title}_copy`,is_public:!1};return delete n.id,delete n.created_at,delete n.created_by,t.createElement(n)},getLessons:async t=>{const a=new URLSearchParams;(null==t?void 0:t.subject)&&a.append("subject",t.subject.toString()),(null==t?void 0:t.created_by)&&a.append("created_by",t.created_by),(null==t?void 0:t.search)&&a.append("search",t.search),(null==t?void 0:t.page)&&a.append("page",t.page.toString());return(await e.get(`/knowledge-graph/lessons/?${a.toString()}`)).data},getLesson:async t=>(await e.get(`/knowledge-graph/lessons/${t}/`)).data,createLesson:async t=>{const{element_ids:a,...n}=t,s=await e.post("/knowledge-graph/lessons/",n),l=s.data.data;if(a&&a.length>0){for(let t=0;t<a.length;t++)await e.post(`/knowledge-graph/lessons/${l.id}/elements/`,{element_id:a[t],order:t+1,is_optional:!1});return(await e.get(`/knowledge-graph/lessons/${l.id}/`)).data}return s.data},updateLesson:async(t,a)=>{const{element_ids:n,...s}=a;if(await e.patch(`/knowledge-graph/lessons/${t}/`,s),void 0!==n){const a=(await e.get(`/knowledge-graph/lessons/${t}/`)).data.data.elements_list||[];new Set(a.map(e=>e.element.id));const s=new Set(n);for(const n of a)s.has(n.element.id)||await e.delete(`/knowledge-graph/lessons/${t}/elements/${n.id}/`);for(let l=0;l<n.length;l++){const s=n[l],d=a.find(e=>e.element.id===s);d?await e.patch(`/knowledge-graph/lessons/${t}/elements/${d.id}/`,{order:l+1}):await e.post(`/knowledge-graph/lessons/${t}/elements/`,{element_id:s,order:l+1,is_optional:!1})}}return(await e.get(`/knowledge-graph/lessons/${t}/`)).data},deleteLesson:async t=>{await e.delete(`/knowledge-graph/lessons/${t}/`)},copyLesson:async e=>{const a=await t.getLesson(e),n={...a.data,title:`${a.data.title}_copy`,is_public:!1};return delete n.id,delete n.created_at,delete n.created_by,delete n.elements,delete n.elements_count,delete n.total_duration_minutes,delete n.total_max_score,t.createLesson(n)}};export{t as c};
